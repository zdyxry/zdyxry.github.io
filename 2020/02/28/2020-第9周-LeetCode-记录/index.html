<!doctype html><html lang=en><head><title>2020 第9周 LeetCode 记录 · Yiran's Blog</title><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=color-scheme content="light dark"><meta name=author content="Yiran Zhou"><meta name=description content="1300. Sum of Mutated Array Closest to Target Link to heading 对 arr 进行降序排序，将 arr 中的最小值乘以 arr 长度与 target比较，若比 target 小，则将其丢弃，并将其从 target 中减去。 若 arr 为空，则表示 arr 中最大值乘以 arr 长度仍比 target 小，则返回 arr 中的最大值。 若 arr 不为空，则表示 arr 中存在大于目标值的数值，取 target 除以此时 arr 长度（arr 中所有数值均大于目标值），最终值四舍五入得到目标值。
class Solution(object): def findBestValue(self, arr, target): &#34;&#34;&#34; :type arr: List[int] :type target: int :rtype: int &#34;&#34;&#34; arr.sort(reverse = True) while arr and target >= arr[-1]*len(arr): temp = arr[-1] target -= arr."><meta name=keywords content="blog,developer,personal"><meta name=twitter:card content="summary"><meta name=twitter:title content="2020 第9周 LeetCode 记录"><meta name=twitter:description content="1300. Sum of Mutated Array Closest to Target Link to heading 对 arr 进行降序排序，将 arr 中的最小值乘以 arr 长度与 target比较，若比 target 小，则将其丢弃，并将其从 target 中减去。 若 arr 为空，则表示 arr 中最大值乘以 arr 长度仍比 target 小，则返回 arr 中的最大值。 若 arr 不为空，则表示 arr 中存在大于目标值的数值，取 target 除以此时 arr 长度（arr 中所有数值均大于目标值），最终值四舍五入得到目标值。
class Solution(object): def findBestValue(self, arr, target): &#34;&#34;&#34; :type arr: List[int] :type target: int :rtype: int &#34;&#34;&#34; arr.sort(reverse = True) while arr and target >= arr[-1]*len(arr): temp = arr[-1] target -= arr."><meta property="og:title" content="2020 第9周 LeetCode 记录"><meta property="og:description" content="1300. Sum of Mutated Array Closest to Target Link to heading 对 arr 进行降序排序，将 arr 中的最小值乘以 arr 长度与 target比较，若比 target 小，则将其丢弃，并将其从 target 中减去。 若 arr 为空，则表示 arr 中最大值乘以 arr 长度仍比 target 小，则返回 arr 中的最大值。 若 arr 不为空，则表示 arr 中存在大于目标值的数值，取 target 除以此时 arr 长度（arr 中所有数值均大于目标值），最终值四舍五入得到目标值。
class Solution(object): def findBestValue(self, arr, target): &#34;&#34;&#34; :type arr: List[int] :type target: int :rtype: int &#34;&#34;&#34; arr.sort(reverse = True) while arr and target >= arr[-1]*len(arr): temp = arr[-1] target -= arr."><meta property="og:type" content="article"><meta property="og:url" content="https://zdyxry.github.io/2020/02/28/2020-%E7%AC%AC9%E5%91%A8-LeetCode-%E8%AE%B0%E5%BD%95/"><meta property="article:section" content="posts"><meta property="article:published_time" content="2020-02-28T19:35:45+00:00"><meta property="article:modified_time" content="2020-02-28T19:35:45+00:00"><link rel=canonical href=https://zdyxry.github.io/2020/02/28/2020-%E7%AC%AC9%E5%91%A8-LeetCode-%E8%AE%B0%E5%BD%95/><link rel=preload href="/fonts/forkawesome-webfont.woff2?v=1.2.0" as=font type=font/woff2 crossorigin><link rel=stylesheet href=/css/coder.min.01bd429dda63a16d76996eaf0b8da061429b76e714515cb1b246aac7fe7f4b2a.css integrity="sha256-Ab1CndpjoW12mW6vC42gYUKbducUUVyxskaqx/5/Syo=" crossorigin=anonymous media=screen><link rel=stylesheet href=/css/coder-dark.min.593028e7f7ac55c003b79c230d1cd411bb4ca53b31556c3abb7f027170e646e9.css integrity="sha256-WTAo5/esVcADt5wjDRzUEbtMpTsxVWw6u38CcXDmRuk=" crossorigin=anonymous media=screen><link rel=icon type=image/png href=/images/yiran.png sizes=32x32><link rel=icon type=image/png href=/images/yiran.png sizes=16x16><link rel=apple-touch-icon href=/images/apple-touch-icon.png><link rel=apple-touch-icon sizes=180x180 href=/images/apple-touch-icon.png><link rel=manifest href=/site.webmanifest><link rel=mask-icon href=/images/safari-pinned-tab.svg color=#5bbad5><meta name=generator content="Hugo 0.101.0"></head><body class="preload-transitions colorscheme-dark"><div class=float-container><a id=dark-mode-toggle class=colorscheme-toggle><i class="fa fa-adjust fa-fw" aria-hidden=true></i></a></div><main class=wrapper><nav class=navigation><section class=container><a class=navigation-title href=/>Yiran's Blog</a>
<input type=checkbox id=menu-toggle>
<label class="menu-button float-right" for=menu-toggle><i class="fa fa-bars fa-fw" aria-hidden=true></i></label><ul class=navigation-list><li class=navigation-item><a class=navigation-link href=/posts/>Blog</a></li><li class=navigation-item><a class=navigation-link href=/tags/>Tags</a></li><li class=navigation-item><a class=navigation-link href=/friends/>Friends</a></li><li class=navigation-item><a class=navigation-link href=/about/>About</a></li></ul></section></nav><div class=content><section class="container post"><article><header><div class=post-title><h1 class=title><a class=title-link href=https://zdyxry.github.io/2020/02/28/2020-%E7%AC%AC9%E5%91%A8-LeetCode-%E8%AE%B0%E5%BD%95/>2020 第9周 LeetCode 记录</a></h1></div><div class=post-meta><div class=date><span class=posted-on><i class="fa fa-calendar" aria-hidden=true></i>
<time datetime=2020-02-28T19:35:45Z>February 28, 2020</time></span>
<span class=reading-time><i class="fa fa-clock-o" aria-hidden=true></i>
4-minute read</span></div><div class=tags><i class="fa fa-tag" aria-hidden=true></i>
<span class=tag><a href=/tags/LeetCode/>LeetCode</a></span></div></div></header><nav id=TableOfContents><ul><li><ul><li><a href=#1300-sum-of-mutated-array-closest-to-target>1300. Sum of Mutated Array Closest to Target</a></li><li><a href=#1299-replace-elements-with-greatest-element-on-right-side>1299. Replace Elements with Greatest Element on Right Side</a></li><li><a href=#1363-largest-multiple-of-three>1363. Largest Multiple of Three</a></li><li><a href=#1362-closest-divisors>1362. Closest Divisors</a></li><li><a href=#228-summary-ranges>228. Summary Ranges</a></li></ul></li></ul></nav><div class=post-content><h3 id=1300-sum-of-mutated-array-closest-to-target>1300. Sum of Mutated Array Closest to Target
<a class=heading-link href=#1300-sum-of-mutated-array-closest-to-target><i class="fa fa-link" aria-hidden=true title="Link to heading"></i>
<span class=sr-only>Link to heading</span></a></h3><p>对 arr 进行降序排序，将 arr 中的最小值乘以 arr 长度与 target比较，若比 target 小，则将其丢弃，并将其从 target 中减去。
若 arr 为空，则表示 arr 中最大值乘以 arr 长度仍比 target 小，则返回 arr 中的最大值。
若 arr 不为空，则表示 arr 中存在大于目标值的数值，取 target 除以此时 arr 长度（arr 中所有数值均大于目标值），最终值四舍五入得到目标值。</p><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=font-weight:700>class</span> <span style=font-weight:700>Solution</span>(object):
</span></span><span style=display:flex><span>    <span style=font-weight:700>def</span> findBestValue(self, arr, target):
</span></span><span style=display:flex><span>        <span style=font-style:italic>&#34;&#34;&#34;
</span></span></span><span style=display:flex><span><span style=font-style:italic>        :type arr: List[int]
</span></span></span><span style=display:flex><span><span style=font-style:italic>        :type target: int
</span></span></span><span style=display:flex><span><span style=font-style:italic>        :rtype: int
</span></span></span><span style=display:flex><span><span style=font-style:italic>        &#34;&#34;&#34;</span>
</span></span><span style=display:flex><span>        arr.sort(reverse = <span style=font-weight:700>True</span>)
</span></span><span style=display:flex><span>        
</span></span><span style=display:flex><span>        <span style=font-weight:700>while</span> arr <span style=font-weight:700>and</span> target &gt;= arr[-1]*len(arr):
</span></span><span style=display:flex><span>            temp = arr[-1]
</span></span><span style=display:flex><span>            target -= arr.pop()
</span></span><span style=display:flex><span>        
</span></span><span style=display:flex><span>        <span style=font-weight:700>if</span> <span style=font-weight:700>not</span> arr:
</span></span><span style=display:flex><span>            <span style=font-weight:700>return</span> temp
</span></span><span style=display:flex><span>        res = target/float(len(arr))
</span></span><span style=display:flex><span>        
</span></span><span style=display:flex><span>        <span style=font-weight:700>if</span> res % 1 &gt; 0.5:
</span></span><span style=display:flex><span>            <span style=font-weight:700>return</span> int(res)+1
</span></span><span style=display:flex><span>        <span style=font-weight:700>else</span>:
</span></span><span style=display:flex><span>            <span style=font-weight:700>return</span> int(res)
</span></span></code></pre></div><p>也可用二分方式做，取 [0, max(arr)] 中间值为 mid，对 arr 求和：若数值大于 mid则取 mid，求和结果与 target 比较。
记录最小差值和最小差值时 mid 值，若求和数值大于 target，则将上限置为 mid-1，否则将下限置为 mid+1，如果求和数值与 target 相等，则直接返回 mid。</p><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=font-weight:700>class</span> <span style=font-weight:700>Solution</span>(object):
</span></span><span style=display:flex><span>    <span style=font-weight:700>def</span> findBestValue(self, arr, target):
</span></span><span style=display:flex><span>        <span style=font-style:italic>&#34;&#34;&#34;
</span></span></span><span style=display:flex><span><span style=font-style:italic>        :type arr: List[int]
</span></span></span><span style=display:flex><span><span style=font-style:italic>        :type target: int
</span></span></span><span style=display:flex><span><span style=font-style:italic>        :rtype: int
</span></span></span><span style=display:flex><span><span style=font-style:italic>        &#34;&#34;&#34;</span>
</span></span><span style=display:flex><span>        left, right = 0, max(arr)
</span></span><span style=display:flex><span>        sub, ans = float(<span style=font-style:italic>&#34;inf&#34;</span>), float(<span style=font-style:italic>&#34;inf&#34;</span>)
</span></span><span style=display:flex><span>        
</span></span><span style=display:flex><span>        <span style=font-weight:700>while</span> left &lt;= right:
</span></span><span style=display:flex><span>            mid = (left + right) // 2
</span></span><span style=display:flex><span>            
</span></span><span style=display:flex><span>            tmp = 0 
</span></span><span style=display:flex><span>            <span style=font-weight:700>for</span> num <span style=font-weight:700>in</span> arr:
</span></span><span style=display:flex><span>                <span style=font-weight:700>if</span> num &gt; mid:
</span></span><span style=display:flex><span>                    tmp += mid
</span></span><span style=display:flex><span>                <span style=font-weight:700>else</span>:
</span></span><span style=display:flex><span>                    tmp += num
</span></span><span style=display:flex><span>            
</span></span><span style=display:flex><span>            cur_sub = abs(tmp - target)
</span></span><span style=display:flex><span> 
</span></span><span style=display:flex><span>            <span style=font-weight:700>if</span> cur_sub &lt; sub:
</span></span><span style=display:flex><span>                sub = cur_sub
</span></span><span style=display:flex><span>                ans = mid
</span></span><span style=display:flex><span>            <span style=font-weight:700>elif</span> cur_sub == sub:
</span></span><span style=display:flex><span>                ans = min(ans, mid)
</span></span><span style=display:flex><span> 
</span></span><span style=display:flex><span>            <span style=font-weight:700>if</span> tmp &gt; target:
</span></span><span style=display:flex><span>                right = mid - 1
</span></span><span style=display:flex><span>            <span style=font-weight:700>elif</span> tmp &lt; target:
</span></span><span style=display:flex><span>                left = mid + 1
</span></span><span style=display:flex><span>            <span style=font-weight:700>elif</span> tmp == target:
</span></span><span style=display:flex><span>                <span style=font-weight:700>return</span> mid
</span></span><span style=display:flex><span>                
</span></span><span style=display:flex><span>        <span style=font-weight:700>return</span> ans
</span></span></code></pre></div><h3 id=1299-replace-elements-with-greatest-element-on-right-side>1299. Replace Elements with Greatest Element on Right Side
<a class=heading-link href=#1299-replace-elements-with-greatest-element-on-right-side><i class="fa fa-link" aria-hidden=true title="Link to heading"></i>
<span class=sr-only>Link to heading</span></a></h3><p>按照题意暴力解法，时间接近5s。</p><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=font-weight:700>class</span> <span style=font-weight:700>Solution</span>(object):
</span></span><span style=display:flex><span>    <span style=font-weight:700>def</span> replaceElements(self, arr):
</span></span><span style=display:flex><span>        <span style=font-style:italic>&#34;&#34;&#34;
</span></span></span><span style=display:flex><span><span style=font-style:italic>        :type arr: List[int]
</span></span></span><span style=display:flex><span><span style=font-style:italic>        :rtype: List[int]
</span></span></span><span style=display:flex><span><span style=font-style:italic>        &#34;&#34;&#34;</span>
</span></span><span style=display:flex><span>        <span style=font-weight:700>for</span> i <span style=font-weight:700>in</span> range(len(arr)):
</span></span><span style=display:flex><span>            <span style=font-weight:700>if</span> i == len(arr)-1:
</span></span><span style=display:flex><span>                arr[i] = -1
</span></span><span style=display:flex><span>                <span style=font-weight:700>return</span> arr
</span></span><span style=display:flex><span>            arr[i] = max(arr[i+1:])
</span></span><span style=display:flex><span>        <span style=font-weight:700>return</span> arr
</span></span></code></pre></div><p>正确姿势为从后向前比较，每次比较最大值与 arr[i] 即可。</p><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=font-weight:700>class</span> <span style=font-weight:700>Solution</span>(object):
</span></span><span style=display:flex><span>    <span style=font-weight:700>def</span> replaceElements(self, arr):
</span></span><span style=display:flex><span>        <span style=font-style:italic>&#34;&#34;&#34;
</span></span></span><span style=display:flex><span><span style=font-style:italic>        :type arr: List[int]
</span></span></span><span style=display:flex><span><span style=font-style:italic>        :rtype: List[int]
</span></span></span><span style=display:flex><span><span style=font-style:italic>        &#34;&#34;&#34;</span>
</span></span><span style=display:flex><span>        greatest = -1
</span></span><span style=display:flex><span>        <span style=font-weight:700>for</span> i <span style=font-weight:700>in</span> range(len(arr)-1, -1, -1):
</span></span><span style=display:flex><span>            <span style=font-weight:700>if</span> arr[i] &lt; greatest:
</span></span><span style=display:flex><span>                arr[i] = greatest
</span></span><span style=display:flex><span>            <span style=font-weight:700>else</span>:
</span></span><span style=display:flex><span>                arr[i], greatest = greatest, arr[i]
</span></span><span style=display:flex><span>        <span style=font-weight:700>return</span> arr
</span></span></code></pre></div><h3 id=1363-largest-multiple-of-three>1363. Largest Multiple of Three
<a class=heading-link href=#1363-largest-multiple-of-three><i class="fa fa-link" aria-hidden=true title="Link to heading"></i>
<span class=sr-only>Link to heading</span></a></h3><p>这是一道数学题，当一个数字可以被 3 整除时，那么这个数字每一位相加之和也可被 3 整除。</p><p>倒序排序，计算所有数字之和，如果可以被 3 整除，那么直接返回；
如果余数为1，则从数组中尝试删除 1，4，7 其中一个；
如果余数为2，则从数组中尝试删除 2，5，8 其中一个；
若仍不满足条件，且余数为 2 ，则从数组中尝试删除 1，4，7 其中两个；
若仍不满足条件，且余数为 1 ，则从数组中尝试删除 2，5，8 其中两个；</p><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=font-weight:700>class</span> <span style=font-weight:700>Solution</span>(object):
</span></span><span style=display:flex><span>    <span style=font-weight:700>def</span> largestMultipleOfThree(self, A):
</span></span><span style=display:flex><span>        <span style=font-style:italic>&#34;&#34;&#34;
</span></span></span><span style=display:flex><span><span style=font-style:italic>        :type digits: List[int]
</span></span></span><span style=display:flex><span><span style=font-style:italic>        :rtype: str
</span></span></span><span style=display:flex><span><span style=font-style:italic>        &#34;&#34;&#34;</span>
</span></span><span style=display:flex><span>        total = sum(A)
</span></span><span style=display:flex><span>        count = collections.Counter(A)
</span></span><span style=display:flex><span>        A.sort(reverse=1)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=font-weight:700>def</span> f(i):
</span></span><span style=display:flex><span>            <span style=font-weight:700>if</span> count[i]:
</span></span><span style=display:flex><span>                A.remove(i)
</span></span><span style=display:flex><span>                count[i] -= 1
</span></span><span style=display:flex><span>            <span style=font-weight:700>if</span> <span style=font-weight:700>not</span> A: <span style=font-weight:700>return</span> <span style=font-style:italic>&#39;&#39;</span>
</span></span><span style=display:flex><span>            <span style=font-weight:700>if</span> <span style=font-weight:700>not</span> any(A): <span style=font-weight:700>return</span> <span style=font-style:italic>&#39;0&#39;</span>
</span></span><span style=display:flex><span>            <span style=font-weight:700>if</span> sum(A) % 3 == 0: <span style=font-weight:700>return</span> <span style=font-style:italic>&#39;&#39;</span>.join(map(str, A))
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=font-weight:700>if</span> total % 3 == 0:
</span></span><span style=display:flex><span>            <span style=font-weight:700>return</span> f(-1)
</span></span><span style=display:flex><span>        <span style=font-weight:700>if</span> total % 3 == 1 <span style=font-weight:700>and</span> count[1] + count[4] + count[7]:
</span></span><span style=display:flex><span>            <span style=font-weight:700>return</span> f(1) <span style=font-weight:700>or</span> f(4) <span style=font-weight:700>or</span> f(7)
</span></span><span style=display:flex><span>        <span style=font-weight:700>if</span> total % 3 == 2 <span style=font-weight:700>and</span> count[2] + count[5] + count[8]:
</span></span><span style=display:flex><span>            <span style=font-weight:700>return</span> f(2) <span style=font-weight:700>or</span> f(5) <span style=font-weight:700>or</span> f(8)
</span></span><span style=display:flex><span>        <span style=font-weight:700>if</span> total % 3 == 2:
</span></span><span style=display:flex><span>            <span style=font-weight:700>return</span> f(1) <span style=font-weight:700>or</span> f(1) <span style=font-weight:700>or</span> f(4) <span style=font-weight:700>or</span> f(4) <span style=font-weight:700>or</span> f(7) <span style=font-weight:700>or</span> f(7)
</span></span><span style=display:flex><span>        <span style=font-weight:700>return</span> f(2) <span style=font-weight:700>or</span> f(2) <span style=font-weight:700>or</span> f(5) <span style=font-weight:700>or</span> f(5) <span style=font-weight:700>or</span> f(8) <span style=font-weight:700>or</span> f(8)
</span></span></code></pre></div><h3 id=1362-closest-divisors>1362. Closest Divisors
<a class=heading-link href=#1362-closest-divisors><i class="fa fa-link" aria-hidden=true title="Link to heading"></i>
<span class=sr-only>Link to heading</span></a></h3><p>求 num 的平方根，倒序排序后，依次遍历检测是否被 (num + 1) 或 (num + 2) 整除，若整除则为所求结果。</p><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=font-weight:700>class</span> <span style=font-weight:700>Solution</span>(object):
</span></span><span style=display:flex><span>    <span style=font-weight:700>def</span> closestDivisors(self, num):
</span></span><span style=display:flex><span>        <span style=font-style:italic>&#34;&#34;&#34;
</span></span></span><span style=display:flex><span><span style=font-style:italic>        :type num: int
</span></span></span><span style=display:flex><span><span style=font-style:italic>        :rtype: List[int]
</span></span></span><span style=display:flex><span><span style=font-style:italic>        &#34;&#34;&#34;</span>
</span></span><span style=display:flex><span>        <span style=font-weight:700>for</span> i <span style=font-weight:700>in</span> reversed(range(1, int((num + 2) ** 0.5) + 1)):
</span></span><span style=display:flex><span>            <span style=font-weight:700>if</span> <span style=font-weight:700>not</span> (num + 1) % i:
</span></span><span style=display:flex><span>                <span style=font-weight:700>return</span> [i, (num + 1) // i]
</span></span><span style=display:flex><span>            <span style=font-weight:700>if</span> <span style=font-weight:700>not</span> (num + 2) % i:
</span></span><span style=display:flex><span>                <span style=font-weight:700>return</span> [i, (num + 2) // i]
</span></span></code></pre></div><h3 id=228-summary-ranges>228. Summary Ranges
<a class=heading-link href=#228-summary-ranges><i class="fa fa-link" aria-hidden=true title="Link to heading"></i>
<span class=sr-only>Link to heading</span></a></h3><p>这道题我在实际应用中遇到过，具体问题可以看这篇记录 <a href=https://zdyxry.github.io/2019/04/11/%E8%AE%B0%E4%B8%80%E6%AC%A1-libcgroup-%E9%85%8D%E7%BD%AE%E5%A4%B1%E8%B4%A5/>《记一次 libcgroup 配置失败》</a> 。</p><p>记录当前连续数字的 start 和 end，并遍历数组进行判断，如果 num = end + 1 ，那么更新 end 数值，如果不等于，那么将这段数字转换为字符串并添加到结果中，并重置 start & end。</p><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=font-weight:700>class</span> <span style=font-weight:700>Solution</span>(object):
</span></span><span style=display:flex><span>    <span style=font-weight:700>def</span> summaryRanges(self, nums):
</span></span><span style=display:flex><span>        <span style=font-style:italic>&#34;&#34;&#34;
</span></span></span><span style=display:flex><span><span style=font-style:italic>        :type nums: List[int]
</span></span></span><span style=display:flex><span><span style=font-style:italic>        :rtype: List[str]
</span></span></span><span style=display:flex><span><span style=font-style:italic>        &#34;&#34;&#34;</span>
</span></span><span style=display:flex><span>        ranges = []
</span></span><span style=display:flex><span>        <span style=font-weight:700>if</span> <span style=font-weight:700>not</span> nums:
</span></span><span style=display:flex><span>            <span style=font-weight:700>return</span> ranges
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        start, end = nums[0], nums[0]
</span></span><span style=display:flex><span>        <span style=font-weight:700>for</span> i <span style=font-weight:700>in</span> xrange(1, len(nums) + 1):
</span></span><span style=display:flex><span>            <span style=font-weight:700>if</span> i &lt; len(nums) <span style=font-weight:700>and</span> nums[i] == end + 1:
</span></span><span style=display:flex><span>                end = nums[i]
</span></span><span style=display:flex><span>            <span style=font-weight:700>else</span>:
</span></span><span style=display:flex><span>                interval = str(start)
</span></span><span style=display:flex><span>                <span style=font-weight:700>if</span> start != end:
</span></span><span style=display:flex><span>                    interval += <span style=font-style:italic>&#34;-&gt;&#34;</span> + str(end)
</span></span><span style=display:flex><span>                ranges.append(interval)
</span></span><span style=display:flex><span>                <span style=font-weight:700>if</span> i &lt; len(nums):
</span></span><span style=display:flex><span>                    start = end = nums[i]
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=font-weight:700>return</span> ranges
</span></span></code></pre></div><p>p.s. 贴一下自己用 shell 写的，写完就看不懂了。。</p><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span><span style=font-weight:700>function</span> format_qemu_processors {
</span></span><span style=display:flex><span>    <span style=font-style:italic># cgconfig.service could not be active when libcgroup &lt;= libcgroup-0.41-20.el7 and config field &gt;= 100 char</span>
</span></span><span style=display:flex><span>    <span style=font-style:italic># use `-` format qemu_processors</span>
</span></span><span style=display:flex><span>    <span style=font-style:italic># example:</span>
</span></span><span style=display:flex><span>    <span style=font-style:italic># qemu_processors input (6,7,8,9,10),  output is &#34;6-10&#34;</span>
</span></span><span style=display:flex><span>    <span style=font-style:italic># qemu_processors input (10,9,8,7,6),  output is &#34;6-10&#34;</span>
</span></span><span style=display:flex><span>    <span style=font-style:italic># qemu_processors input (6,7,8,10,11), output is &#34;6-8,10-11&#34;</span>
</span></span><span style=display:flex><span>    <span style=font-style:italic># qemu_processors input (1,3,5,7,9),   output is &#34;1,3,5,7,9&#34;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    IFS=<span style=font-style:italic>$&#39;\n&#39;</span> sorted=(<span style=font-weight:700>$(</span>sort -n &lt;&lt;&lt;<span style=font-style:italic>&#34;</span><span style=font-weight:700;font-style:italic>${</span>qemu_processors[*]<span style=font-weight:700;font-style:italic>}</span><span style=font-style:italic>&#34;</span><span style=font-weight:700>)</span>)
</span></span><span style=display:flex><span>    unset IFS
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    QEMU_CPUS=<span style=font-style:italic>&#34;&#34;</span>
</span></span><span style=display:flex><span>    TAG=<span style=font-style:italic>&#34;&#34;</span>
</span></span><span style=display:flex><span>    <span style=font-weight:700>for</span> i in <span style=font-style:italic>&#34;</span><span style=font-weight:700;font-style:italic>${</span>!sorted[@]<span style=font-weight:700;font-style:italic>}</span><span style=font-style:italic>&#34;</span>;<span style=font-weight:700>do</span>
</span></span><span style=display:flex><span>        <span style=font-weight:700>if</span> [[ <span style=font-style:italic>&#34;</span><span style=font-weight:700;font-style:italic>${</span>sorted[(i+1)]<span style=font-weight:700;font-style:italic>}</span><span style=font-style:italic>&#34;</span> == <span style=font-style:italic>`</span>expr <span style=font-weight:700;font-style:italic>${</span>sorted[i]<span style=font-weight:700;font-style:italic>}</span> + 1<span style=font-style:italic>`</span> ]];<span style=font-weight:700>then</span>
</span></span><span style=display:flex><span>            <span style=font-weight:700>if</span> [[ <span style=font-weight:700;font-style:italic>${</span>sorted[(i-1)]<span style=font-weight:700;font-style:italic>}</span> == $TAG ]];<span style=font-weight:700>then</span>
</span></span><span style=display:flex><span>                TAG=<span style=font-weight:700;font-style:italic>${</span>sorted[i]<span style=font-weight:700;font-style:italic>}</span>
</span></span><span style=display:flex><span>                <span style=font-weight:700>continue</span>
</span></span><span style=display:flex><span>            <span style=font-weight:700>fi</span>
</span></span><span style=display:flex><span>            QEMU_CPUS=$QEMU_CPUS<span style=font-style:italic>&#34;</span><span style=font-weight:700;font-style:italic>${</span>sorted[i]<span style=font-weight:700;font-style:italic>}</span><span style=font-style:italic>&#34;</span>
</span></span><span style=display:flex><span>            QEMU_CPUS=$QEMU_CPUS<span style=font-style:italic>&#34;-&#34;</span>
</span></span><span style=display:flex><span>            TAG=<span style=font-style:italic>&#34;</span><span style=font-weight:700;font-style:italic>${</span>sorted[i]<span style=font-weight:700;font-style:italic>}</span><span style=font-style:italic>&#34;</span>
</span></span><span style=display:flex><span>        <span style=font-weight:700>else</span>
</span></span><span style=display:flex><span>            QEMU_CPUS=$QEMU_CPUS<span style=font-style:italic>&#34;</span><span style=font-weight:700;font-style:italic>${</span>sorted[i]<span style=font-weight:700;font-style:italic>}</span><span style=font-style:italic>&#34;</span>
</span></span><span style=display:flex><span>            <span style=font-weight:700>if</span> [[ <span style=font-weight:700;font-style:italic>${</span>sorted[i]<span style=font-weight:700;font-style:italic>}</span>  != <span style=font-weight:700;font-style:italic>${</span>sorted[-1]<span style=font-weight:700;font-style:italic>}</span> ]];<span style=font-weight:700>then</span>
</span></span><span style=display:flex><span>                QEMU_CPUS=$QEMU_CPUS<span style=font-style:italic>&#34;,&#34;</span>
</span></span><span style=display:flex><span>            <span style=font-weight:700>fi</span>
</span></span><span style=display:flex><span>        <span style=font-weight:700>fi</span>
</span></span><span style=display:flex><span>    <span style=font-weight:700>done</span>
</span></span><span style=display:flex><span>    echo <span style=font-weight:700;font-style:italic>${</span>QEMU_CPUS<span style=font-weight:700;font-style:italic>}</span>
</span></span><span style=display:flex><span>}
</span></span></code></pre></div></div><footer><div id=disqus_thread></div><script>window.disqus_config=function(){},function(){if(["localhost","127.0.0.1"].indexOf(window.location.hostname)!=-1){document.getElementById("disqus_thread").innerHTML="Disqus comments not available by default when the website is previewed locally.";return}var t=document,e=t.createElement("script");e.async=!0,e.src="//zdyxry.disqus.com/embed.js",e.setAttribute("data-timestamp",+new Date),(t.head||t.body).appendChild(e)}(),document.addEventListener("themeChanged",function(){document.readyState=="complete"&&DISQUS.reset({reload:!0,config:disqus_config})})</script></footer></article></section></div><footer class=footer><section class=container>©
2016 -
2023
Yiran Zhou
·
Powered by <a href=https://gohugo.io/>Hugo</a> & <a href=https://github.com/luizdepra/hugo-coder/>Coder</a>.</section></footer></main><script src=/js/coder.min.6ae284be93d2d19dad1f02b0039508d9aab3180a12a06dcc71b0b0ef7825a317.js integrity="sha256-auKEvpPS0Z2tHwKwA5UI2aqzGAoSoG3McbCw73gloxc="></script>
<script async src="https://www.googletagmanager.com/gtag/js?id=G-G0433XDZ3V"></script>
<script>var doNotTrack=!1;if(!doNotTrack){window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-G0433XDZ3V",{anonymize_ip:!1})}</script></body></html>