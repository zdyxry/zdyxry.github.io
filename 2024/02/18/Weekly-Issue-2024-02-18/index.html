<!doctype html><html lang=zh-cn><head><title>Weekly Issue 2024-02-18 · Yiran's Blog</title><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=color-scheme content="light dark"><meta name=author content="Yiran Zhou"><meta name=description content="假期结束。"><meta name=keywords content="blog,developer,personal"><meta name=twitter:card content="summary"><meta name=twitter:title content="Weekly Issue 2024-02-18"><meta name=twitter:description content="假期结束。"><meta property="og:title" content="Weekly Issue 2024-02-18"><meta property="og:description" content="假期结束。"><meta property="og:type" content="article"><meta property="og:url" content="https://zdyxry.github.io/2024/02/18/Weekly-Issue-2024-02-18/"><meta property="article:section" content="posts"><meta property="article:published_time" content="2024-02-18T00:00:00+00:00"><meta property="article:modified_time" content="2024-02-18T00:00:00+00:00"><link rel=canonical href=https://zdyxry.github.io/2024/02/18/Weekly-Issue-2024-02-18/><link rel=preload href="/fonts/forkawesome-webfont.woff2?v=1.2.0" as=font type=font/woff2 crossorigin><link rel=stylesheet href=/css/coder.min.76ce9bad7ac9bd368d486c6e91e7e0906fff71d9d35ccbf93959a375e2bf50e5.css integrity="sha256-ds6brXrJvTaNSGxukefgkG//cdnTXMv5OVmjdeK/UOU=" crossorigin=anonymous media=screen><link rel=stylesheet href=/css/coder-dark.min.593028e7f7ac55c003b79c230d1cd411bb4ca53b31556c3abb7f027170e646e9.css integrity="sha256-WTAo5/esVcADt5wjDRzUEbtMpTsxVWw6u38CcXDmRuk=" crossorigin=anonymous media=screen><link rel=icon type=image/png href=/images/yiran.png sizes=32x32><link rel=icon type=image/png href=/images/yiran.png sizes=16x16><link rel=apple-touch-icon href=/images/apple-touch-icon.png><link rel=apple-touch-icon sizes=180x180 href=/images/apple-touch-icon.png><link rel=manifest href=/site.webmanifest><link rel=mask-icon href=/images/safari-pinned-tab.svg color=#5bbad5><meta name=generator content="Hugo 0.101.0"></head><body class="preload-transitions colorscheme-auto"><div class=float-container><a id=dark-mode-toggle class=colorscheme-toggle><i class="fa fa-adjust fa-fw" aria-hidden=true></i></a></div><main class=wrapper><nav class=navigation><section class=container><a class=navigation-title href=/>Yiran's Blog</a>
<input type=checkbox id=menu-toggle>
<label class="menu-button float-right" for=menu-toggle><i class="fa fa-bars fa-fw" aria-hidden=true></i></label><ul class=navigation-list><li class=navigation-item><a class=navigation-link href=/posts/>Blog</a></li><li class=navigation-item><a class=navigation-link href=/tags/>Tags</a></li><li class=navigation-item><a class=navigation-link href=/friends/>Friends</a></li><li class=navigation-item><a class=navigation-link href=/about/>About</a></li></ul></section></nav><div class=content><section class="container post"><article><header><div class=post-title><h1 class=title><a class=title-link href=https://zdyxry.github.io/2024/02/18/Weekly-Issue-2024-02-18/>Weekly Issue 2024-02-18</a></h1></div><div class=post-meta><div class=date><span class=posted-on><i class="fa fa-calendar" aria-hidden=true></i>
<time datetime=2024-02-18T00:00:00Z>February 18, 2024</time></span>
<span class=reading-time><i class="fa fa-clock-o" aria-hidden=true></i>
阅读时间：3 分钟</span></div><div class=tags><i class="fa fa-tag" aria-hidden=true></i>
<span class=tag><a href=/tags/Weekly/>Weekly</a></span></div></div></header><nav id=TableOfContents><ul><li><a href=#文章>文章</a><ul><li><a href=#技术>技术</a></li><li><a href=#生活>生活</a></li></ul></li><li><a href=#书影>书影</a></li><li><a href=#碎碎念>碎碎念</a></li></ul></nav><div class=post-content><h2 id=文章>文章
<a class=heading-link href=#%e6%96%87%e7%ab%a0><i class="fa fa-link" aria-hidden=true title=链接到标题></i>
<span class=sr-only>链接到标题</span></a></h2><h3 id=技术>技术
<a class=heading-link href=#%e6%8a%80%e6%9c%af><i class="fa fa-link" aria-hidden=true title=链接到标题></i>
<span class=sr-only>链接到标题</span></a></h3><p><a href=https://yorickpeterse.com/articles/what-it-was-like-working-for-gitlab/>What it was like working for GitLab</a></p><blockquote><p>GitLab also had a tendency to listen more to complaints on Hacker News than internal complaints. This lead to an internal running joke that it if you wanted something to change, you&rsquo;d have better luck complaining about it anonymously on Hacker News instead of bringing it up through the proper channels.</p></blockquote><blockquote><p>It&rsquo;s well known that adding more people to a project doesn&rsquo;t necessarily improve productivity and results (see also &ldquo;The Mythical Man-Month&rdquo;), and yet almost every western startup with venture capital seems to ignore this, hiring hundreds of developers even if the product doesn&rsquo;t need nearly that many developers.</p></blockquote><p>作者在 [[Gitlab]]工作 6 年多，这篇文章是在保密协议过期之后的回忆，记录了在这几年所做的内容，能感受到期间的挣扎。
作者学到了什么：</p><ul><li>可扩展性需要成为公司文化的一部分<ul><li>gitlab.com 不是 [[Gitlab]] 的主要盈利方式，所以不受重视，gitlab.com 遇到的问题的解决方式通常也无法应用在 self-hosted 版本上。</li></ul></li><li>让团队变为数据和开发人员驱动</li><li>如果没有数据，无法确定什么是“最小可行”<ul><li>没有数据支撑的需求描述，很有可能最后做出来没人用的功能</li></ul></li><li>SaaS 版本和 self-hosted 版本分叉</li><li>更多的研发人员不等于更好的结果</li><li>对于 RoR 的困惑<ul><li>RoR 太过于灵活，导致比较容易写出性能略差的代码</li></ul></li><li>良好的 CI/CD 很重要</li><li>基于工作地点的工资具有歧视性</li></ul><hr><p><a href=https://oxide.computer/blog/compensation-as-a-reflection-of-values>Compensation as a Reflection of Values / Oxide</a></p><p>[[0xide]] 的薪资水平说明，所有人都是相同的薪水。</p><blockquote><p>The truth is that companies pay people less in other geographies for a simple reason: because they can. We at Oxide just don’t agree with this; we pay people the same regardless of where they pick up their mail.</p></blockquote><hr><p><a href=https://mp.weixin.qq.com/s/N8AYreKZ5OzNGWFb3m0EsQ>云厂商眼中的客户：又穷又闲又缺爱</a></p><blockquote><p>云计算的用户是谁？本来是一个很简单的问题，主流厂商的画像都很一致，几乎没有分歧。开发者。</p></blockquote><p>公有云如果不能给开发者提供一个良好的技术理念或标准，感觉确实不太行。最近工作中有一个例子，国内厂商的解决方案，与 GCP/AWS 可以说差别非常大。国内的解决方案无法符合安全条例，但是好像没人在意。</p><hr><p><a href=https://www.pacenthink.io/post/feeding-a-hungry-mouse-using-chromedp-and-golang/>Feeding a Hungry Mouse Using Chromedp and Golang</a></p><p>通过 [[Chromedp]] 来使用 [[Golang]] 操作 [[Chrome]] 示例，其中一些关键的地方需要使用 [[JavaScript]] 配合 <code>chromedp.Evaluate</code> 实现。[[Chromedp]] 是 [[Chrome]] only 的，所以如果真的需要做一些浏览器自动化的事情，感觉还是使用 [[Playwright]] 好一些。</p><hr><p><a href=https://crawshaw.io/blog/jsonfile>jsonfile: a quick hack for tinkering</a></p><blockquote><p>But software is not building a house or traveling the world. You can realize a dream with the tools you have on you now, in a few spare hours. This is the great joy of it, you are free from physical and economic constraint.</p></blockquote><p>当做一些小的项目开发时，可以直接使用 <code>json</code> 文件来作为数据库使用，并给出了一个示例实现。</p><hr><p><a href=https://kgrz.io/go-file-read-max-size-buffer.html>Go can only read 1GiB per Read call</a></p><p>[[Golang]] 对 <code>os.File</code> 对象的单个 <code>Read</code> 调用上限是 1 GiB，即使设置 buffer size 是 2GiB，也会一次只读取 1GiB。最早修复是将限制设置为 2GiB-1Bytes，修复 MacOS、FreeBSD 上读取大于等于 2GiB 大小失败问题；随后将限制设置为 1GiB，来保证数据对齐。</p><hr><p><a href=https://astral.sh/blog/uv>uv: Python packaging in Rust</a></p><p>[[Astral]] 公司开发的 [[Python]] 工具链，用来替代 [[pip]] ，与 [[Ruff]] 一样，[[uv]] 专注于性能，在没有缓存的情况快可以比 pip 快 8-10 倍。最终的目标是打造成 [[Python]] 的 [[cargo]]。</p><p>现在 [[Rust]] 对 [[JavaScript]] 和 [[Python]] 的生态改善是明显的，重写一切。</p><hr><p><a href=https://thethreevirtues.com/>The Three Virtues of a GREAT Programmer</a></p><p>[[Perl]] 作者认为的三大美德：懒惰、不耐烦和傲慢。</p><ul><li>懒惰：编写实用的程序，文档化需要频繁回复其他人的问题；</li><li>不耐烦：当编写的程序很慢时感到不耐烦，从而进行优化；</li><li>傲慢：保持代码“洁癖”，这样代码不会被别人说坏话</li></ul><hr><p><a href=https://www.kawabangga.com/posts/5803>一次网络问题排查 | 卡瓦邦噶！</a></p><p>容器内访问 [[HTTPS]] 会卡主，访问 [[HTTP]] 没问题， Host 访问 [[HTTPS]] 和 [[http]] 都没问题。
抓包发现 server 443 返回的包 length == 0 ，猜测是包 MTU 太大导致被丢弃。
MTU 异常，是 [[TCP]] [[MSS]] 协商有问题，于是检查网卡的 MTU 配置，发现 Host 是 1450，Container 内部是 1500。
解决方式：</p><ul><li>[[iptables]] 设置 TCP 握手的 MSS 值<ul><li><code>iptables -I FORWARD -p tcp -m tcp --tcp-flags SYN,RST SYN -j TCPMSS --set-mss 1410</code></li></ul></li><li>配置 docker container interface 的 MTU：<ul><li><code>dockerd --default-network-opt=bridge=com.docker.network.driver.mtu=1234</code></li></ul></li></ul><hr><p><a href=https://matthewsanabria.dev/posts/start-with-the-go-standard-library/>Matthew Sanabria - Start With the Go Standard Library</a></p><p>作者建议尽量使用[[Golang]] 标准库来作为初始实现，以 <code>log/slog</code> , <code>net/http</code>, <code>database/sql</code> 举例说明。</p><blockquote><p>**Go has a great standard library, and you should start with it.</p></blockquote><hr><p><a href=https://valyala.medium.com/why-irate-from-prometheus-doesnt-capture-spikes-45f9896d7832>Why irate from Prometheus doesn&rsquo;t capture spikes | by Aliaksandr Valialkin | Medium</a></p><p>作者认为 [[prometheus]] 的 <code>irate</code> 无法正确的捕获峰值数据，因为 <code>irate</code> 只计算当前区间的最后两个点，可能会丢失其他峰值数据，具体是否有效取决于 start 和 end 以及 step 数值。</p><p>作者建议使用 [[VictoriaMetrics]] 的 <code>rollup_rate</code> 。</p><hr><h3 id=生活>生活
<a class=heading-link href=#%e7%94%9f%e6%b4%bb><i class="fa fa-link" aria-hidden=true title=链接到标题></i>
<span class=sr-only>链接到标题</span></a></h3><p><a href=https://mtlynch.io/solo-developer-year-6/>My Sixth Year as a Bootstrapped Founder · mtlynch.io</a></p><p>[[TinyPilot]] 作者的 2023 总结。一人公司的典范。</p><hr><p><a href=https://changchen.me/blog/20240217/why-did-i-join-autodesk/>在 Autodesk 工作是怎样一番体验？ | Henry Z&rsquo;s blog~</a></p><blockquote><p>第二个遗憾有点类似，即“我希望我工作别那么努力”。这实际上是韦尔的男性病人最遗憾的事。这与我宣扬的理念不谋而合。韦尔写道：“所有我照顾的男性都深深地悔恨自己在人生中太多时间都只是一部工作机器。”女性也会有这样的遗憾，但是韦尔指出，她的病人都是上一辈的人，当时外出工作的女性还比较少。并且，当人们说后悔工作那么努力时，他们不是指那种抚养小孩的艰辛“工作”，而是指为养家糊口、支付账单而从事的工作，他们因此错过孩子的成长以及陪伴伴侣。</p></blockquote><hr><h2 id=书影>书影
<a class=heading-link href=#%e4%b9%a6%e5%bd%b1><i class="fa fa-link" aria-hidden=true title=链接到标题></i>
<span class=sr-only>链接到标题</span></a></h2><p>《杀人者的难堪》，节奏紧凑，剧情有点不讨喜，如果喜欢孙锡久或者崔宇植的话，可以看看。</p><p>《请和我的老公结婚》，韩式重生爽剧，看到 12 集就好。</p><h2 id=碎碎念>碎碎念
<a class=heading-link href=#%e7%a2%8e%e7%a2%8e%e5%bf%b5><i class="fa fa-link" aria-hidden=true title=链接到标题></i>
<span class=sr-only>链接到标题</span></a></h2><ul><li>春节在家被催婚，问我，对方年龄有什么倾向，比你大的可以么？我说，没什么想法。我爷爷：找小的，大的可不行。</li></ul></div><footer><div id=disqus_thread></div><script>window.disqus_config=function(){},function(){if(["localhost","127.0.0.1"].indexOf(window.location.hostname)!=-1){document.getElementById("disqus_thread").innerHTML="Disqus comments not available by default when the website is previewed locally.";return}var t=document,e=t.createElement("script");e.async=!0,e.src="//zdyxry.disqus.com/embed.js",e.setAttribute("data-timestamp",+new Date),(t.head||t.body).appendChild(e)}(),document.addEventListener("themeChanged",function(){document.readyState=="complete"&&DISQUS.reset({reload:!0,config:disqus_config})})</script></footer></article></section></div><footer class=footer><section class=container>©
2016 -
2024
Yiran Zhou
·
技术支持 <a href=https://gohugo.io/>Hugo</a> & <a href=https://github.com/luizdepra/hugo-coder/>Coder</a>.</section></footer></main><script src=/js/coder.min.6ae284be93d2d19dad1f02b0039508d9aab3180a12a06dcc71b0b0ef7825a317.js integrity="sha256-auKEvpPS0Z2tHwKwA5UI2aqzGAoSoG3McbCw73gloxc="></script>
<script async src="https://www.googletagmanager.com/gtag/js?id=G-G0433XDZ3V"></script>
<script>var doNotTrack=!1;if(!doNotTrack){window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-G0433XDZ3V",{anonymize_ip:!1})}</script></body></html>