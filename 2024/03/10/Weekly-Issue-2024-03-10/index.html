<!doctype html><html lang=zh-cn><head><title>Weekly Issue 2024-03-10 · Yiran's Blog</title><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=color-scheme content="light dark"><meta name=author content="Yiran Zhou"><meta name=description content="文章 链接到标题 技术 链接到标题 /tmp | Python Generators Are Underutilized
[[python]] 合理的使用生成器，可以大大减少内存占用，也需要注意生成器的一些可能坑：不能重复生成；调试可能会麻烦；可能会带来一定的心智负担。
对应 [[ruff]] 的规则是： unpacked-list-comprehension (UP027) - Ruff
Introducing the next generation of Claude \ Anthropic
[[Claude]] 发布 Claude 3 ，包含 3 个模型，按照功能升序排列是：Haiku , Sonnet, Opus。Benchmark 显示 Opus 全面领先 GPT-4 。 相较于 Claude 2 ，Claude 3 有更快的速度、更好的图像处理能力、更少的请求拒绝、更好的准确率、更长的上下文。
想要尝试下的时候，发现但是我的 Claude 账号被封了。。。
如何阅读火焰图 | 卡瓦邦噶！
[[火焰图]]主要看父子关系和宽度。深度不是问题，颜色没什么意义，不同方块的顺序没什么意义。
How to Lose Control of your Shell - by Thorsten Ball
启动 SHELL (zsh) 并运行 env 后，程序无法处理 Ctrl-C，把 env 换成 ls 也无法处理 Ctrl-C，把 env 换为 built-in command echo lol 后，可以正常处理 Ctrl-C，为什么？"><meta name=keywords content="blog,developer,personal"><meta name=twitter:card content="summary"><meta name=twitter:title content="Weekly Issue 2024-03-10"><meta name=twitter:description content="文章 链接到标题 技术 链接到标题 /tmp | Python Generators Are Underutilized
[[python]] 合理的使用生成器，可以大大减少内存占用，也需要注意生成器的一些可能坑：不能重复生成；调试可能会麻烦；可能会带来一定的心智负担。
对应 [[ruff]] 的规则是： unpacked-list-comprehension (UP027) - Ruff
Introducing the next generation of Claude \ Anthropic
[[Claude]] 发布 Claude 3 ，包含 3 个模型，按照功能升序排列是：Haiku , Sonnet, Opus。Benchmark 显示 Opus 全面领先 GPT-4 。 相较于 Claude 2 ，Claude 3 有更快的速度、更好的图像处理能力、更少的请求拒绝、更好的准确率、更长的上下文。
想要尝试下的时候，发现但是我的 Claude 账号被封了。。。
如何阅读火焰图 | 卡瓦邦噶！
[[火焰图]]主要看父子关系和宽度。深度不是问题，颜色没什么意义，不同方块的顺序没什么意义。
How to Lose Control of your Shell - by Thorsten Ball
启动 SHELL (zsh) 并运行 env 后，程序无法处理 Ctrl-C，把 env 换成 ls 也无法处理 Ctrl-C，把 env 换为 built-in command echo lol 后，可以正常处理 Ctrl-C，为什么？"><meta property="og:title" content="Weekly Issue 2024-03-10"><meta property="og:description" content="文章 链接到标题 技术 链接到标题 /tmp | Python Generators Are Underutilized
[[python]] 合理的使用生成器，可以大大减少内存占用，也需要注意生成器的一些可能坑：不能重复生成；调试可能会麻烦；可能会带来一定的心智负担。
对应 [[ruff]] 的规则是： unpacked-list-comprehension (UP027) - Ruff
Introducing the next generation of Claude \ Anthropic
[[Claude]] 发布 Claude 3 ，包含 3 个模型，按照功能升序排列是：Haiku , Sonnet, Opus。Benchmark 显示 Opus 全面领先 GPT-4 。 相较于 Claude 2 ，Claude 3 有更快的速度、更好的图像处理能力、更少的请求拒绝、更好的准确率、更长的上下文。
想要尝试下的时候，发现但是我的 Claude 账号被封了。。。
如何阅读火焰图 | 卡瓦邦噶！
[[火焰图]]主要看父子关系和宽度。深度不是问题，颜色没什么意义，不同方块的顺序没什么意义。
How to Lose Control of your Shell - by Thorsten Ball
启动 SHELL (zsh) 并运行 env 后，程序无法处理 Ctrl-C，把 env 换成 ls 也无法处理 Ctrl-C，把 env 换为 built-in command echo lol 后，可以正常处理 Ctrl-C，为什么？"><meta property="og:type" content="article"><meta property="og:url" content="https://zdyxry.github.io/2024/03/10/Weekly-Issue-2024-03-10/"><meta property="article:section" content="posts"><meta property="article:published_time" content="2024-03-10T00:00:00+00:00"><meta property="article:modified_time" content="2024-03-10T00:00:00+00:00"><link rel=canonical href=https://zdyxry.github.io/2024/03/10/Weekly-Issue-2024-03-10/><link rel=preload href="/fonts/forkawesome-webfont.woff2?v=1.2.0" as=font type=font/woff2 crossorigin><link rel=stylesheet href=/css/coder.min.76ce9bad7ac9bd368d486c6e91e7e0906fff71d9d35ccbf93959a375e2bf50e5.css integrity="sha256-ds6brXrJvTaNSGxukefgkG//cdnTXMv5OVmjdeK/UOU=" crossorigin=anonymous media=screen><link rel=stylesheet href=/css/coder-dark.min.593028e7f7ac55c003b79c230d1cd411bb4ca53b31556c3abb7f027170e646e9.css integrity="sha256-WTAo5/esVcADt5wjDRzUEbtMpTsxVWw6u38CcXDmRuk=" crossorigin=anonymous media=screen><link rel=icon type=image/png href=/images/yiran.png sizes=32x32><link rel=icon type=image/png href=/images/yiran.png sizes=16x16><link rel=apple-touch-icon href=/images/apple-touch-icon.png><link rel=apple-touch-icon sizes=180x180 href=/images/apple-touch-icon.png><link rel=manifest href=/site.webmanifest><link rel=mask-icon href=/images/safari-pinned-tab.svg color=#5bbad5><meta name=generator content="Hugo 0.101.0"></head><body class="preload-transitions colorscheme-auto"><div class=float-container><a id=dark-mode-toggle class=colorscheme-toggle><i class="fa fa-adjust fa-fw" aria-hidden=true></i></a></div><main class=wrapper><nav class=navigation><section class=container><a class=navigation-title href=/>Yiran's Blog</a>
<input type=checkbox id=menu-toggle>
<label class="menu-button float-right" for=menu-toggle><i class="fa fa-bars fa-fw" aria-hidden=true></i></label><ul class=navigation-list><li class=navigation-item><a class=navigation-link href=/posts/>Blog</a></li><li class=navigation-item><a class=navigation-link href=/tags/>Tags</a></li><li class=navigation-item><a class=navigation-link href=/friends/>Friends</a></li><li class=navigation-item><a class=navigation-link href=/about/>About</a></li></ul></section></nav><div class=content><section class="container post"><article><header><div class=post-title><h1 class=title><a class=title-link href=https://zdyxry.github.io/2024/03/10/Weekly-Issue-2024-03-10/>Weekly Issue 2024-03-10</a></h1></div><div class=post-meta><div class=date><span class=posted-on><i class="fa fa-calendar" aria-hidden=true></i>
<time datetime=2024-03-10T00:00:00Z>March 10, 2024</time></span>
<span class=reading-time><i class="fa fa-clock-o" aria-hidden=true></i>
阅读时间：2 分钟</span></div><div class=tags><i class="fa fa-tag" aria-hidden=true></i>
<span class=tag><a href=/tags/Weekly/>Weekly</a></span></div></div></header><nav id=TableOfContents><ul><li><a href=#文章>文章</a><ul><li><a href=#技术>技术</a></li><li><a href=#生活>生活</a></li></ul></li><li><a href=#书影>书影</a></li><li><a href=#碎碎念>碎碎念</a></li></ul></nav><div class=post-content><h2 id=文章>文章
<a class=heading-link href=#%e6%96%87%e7%ab%a0><i class="fa fa-link" aria-hidden=true title=链接到标题></i>
<span class=sr-only>链接到标题</span></a></h2><h3 id=技术>技术
<a class=heading-link href=#%e6%8a%80%e6%9c%af><i class="fa fa-link" aria-hidden=true title=链接到标题></i>
<span class=sr-only>链接到标题</span></a></h3><p><a href=https://www.slashtmp.io/posts/generators/>/tmp | Python Generators Are Underutilized</a></p><p>[[python]] 合理的使用生成器，可以大大减少内存占用，也需要注意生成器的一些可能坑：不能重复生成；调试可能会麻烦；可能会带来一定的心智负担。</p><p>对应 [[ruff]] 的规则是： <a href=https://docs.astral.sh/ruff/rules/unpacked-list-comprehension/>unpacked-list-comprehension (UP027) - Ruff</a></p><hr><p><a href=https://www.anthropic.com/news/claude-3-family>Introducing the next generation of Claude \ Anthropic</a></p><p>[[Claude]] 发布 Claude 3 ，包含 3 个模型，按照功能升序排列是：Haiku , Sonnet, Opus。Benchmark 显示 Opus 全面领先 GPT-4 。
相较于 Claude 2 ，Claude 3 有更快的速度、更好的图像处理能力、更少的请求拒绝、更好的准确率、更长的上下文。</p><p>想要尝试下的时候，发现但是我的 Claude 账号被封了。。。</p><hr><p><a href=https://www.kawabangga.com/posts/5861>如何阅读火焰图 | 卡瓦邦噶！</a></p><p>[[火焰图]]主要看父子关系和宽度。深度不是问题，颜色没什么意义，不同方块的顺序没什么意义。</p><hr><p><a href=https://registerspill.thorstenball.com/p/how-to-lose-control-of-your-shell>How to Lose Control of your Shell - by Thorsten Ball</a></p><p>启动 SHELL (zsh) 并运行 <code>env</code> 后，程序无法处理 Ctrl-C，把 <code>env</code> 换成 <code>ls</code> 也无法处理 Ctrl-C，把 <code>env</code> 换为 built-in command <code>echo lol</code> 后，可以正常处理 Ctrl-C，为什么？</p><p>[[ChatGPT]] 的线索：</p><blockquote><p>The spawned shell inherits the terminal (TTY) control, and since it’s an interactive shell (-i flag), it sets itself as the foreground process group leader for the terminal. This changes how signals, especially SIGINT generated by Ctrl-C, are handled.</p></blockquote><p>疑问：shell spawn 后，在不运行 built-in cmd 时生成自己是 process group leader ，然后退出，然后不恢复之前的 process group leader ?</p><p>作者使用 <code>tcgetprg</code> 来打印与 fd 关联的 foreground process group ID，观察到在运行 SHELL 前后，process group ID 确实发生了变化。
[[ChatGPT]] 提示可以使用 [[setsid]] 来将其置为一个新的进程组。调用 [[setsid]] 后：该进程成为新的 session 中的 leader；该进程成为新的 process group 中的 leader；该进程没有控制终端，如果进程在调用 setsid 之前有控制终端，那么该关联会被破坏。</p><p>阶段性总结：程程的 shell 通过设置 foreground process group ID 来控制终端，意味着 Ctrl-C 产生的信号发送到 SHELL 进程，但是如果 SHELL 运行非 built-in cmd 作为最后一个命令，它不会自动清理，并且其进程 ID 扔与终端关联，导致所有的 Ctrl-C 无效。</p><p>为什么 ZSH 在运行非内置命令时不重置 foreground process group leader ？</p><p>作者观察到 ZSH 使用 <code>-c</code> 运行命令的最后一个命令时非 built-in cmd （比如 ls/env）时，ZSH execve 进入最后一个进程，它不会创建子进程运行 ls，而是会将自身替换为 ls 命令，ZSH 进程消失。
但是当运行 <code>zsh -c '/usr/bin/env'; echo lol</code> 时，先执行非 built-in cmd，然后是 built-in cmd，那么 ZSH 不会消失，采用 <code>fork & exec</code> 执行 <code>env</code> ，然后执行 <code>echo lol</code> ，执行完成后清理 foreground process group leader。</p><p><a href=https://lobste.rs/s/hru0ib/how_lose_control_your_shell>How to Lose Control of your Shell | Lobsters</a>
论坛上有人提了一个简单的解决办法： <code>zsh +m</code> ，用来禁用 POSIX job control。</p><p>思考：如果是我来调查这个问题，我会怎么做？</p><hr><h3 id=生活>生活
<a class=heading-link href=#%e7%94%9f%e6%b4%bb><i class="fa fa-link" aria-hidden=true title=链接到标题></i>
<span class=sr-only>链接到标题</span></a></h3><p><a href=https://www.apple.com.cn/newsroom/2024/03/the-app-store-spotify-and-europes-thriving-digital-music-market/>App Store、Spotify 以及繁荣的欧洲数字音乐市场 - Apple (中国大陆)</a></p><blockquote><p>“发现苹果对应用程序开发者施加了限制，阻止他们向 iOS 用户告知应用程序之外可用的替代且更便宜的音乐订阅服务”。</p></blockquote><p>单纯的从 [[Apple]] 这篇文章，感觉到 [[Apple]] 急了，感觉罚款金额不重要，“带头作用” 比较让苹果恐惧？</p><hr><p><a href=https://yolken.net/blog/end-of-airplanedev>The end of Airplane.dev | Benjamin Yolken</a></p><blockquote><p>Airplane 和 Airtable 拥有共同的主要投资者 Thrive Capital，后者领投了 Airplane 的 B 轮融资和 Airtable 的 D 轮融资</p></blockquote><p>每当看到这种想不通的问题，往钱上想总是没错的。</p><hr><p><a href=https://world.hey.com/dhh/could-apple-leave-europe-76441933>Could Apple leave Europe?</a></p><p>[[Apple]] 可能退出欧洲么？ DHH 觉得不会。</p><blockquote><p>在目睹苹果过去几年的行动之前，我会说不可能。蒂姆·库克并不是那种会做出如此大动作的首席执行官。他太保守、太胆怯、太注重底线。但这种思维模式最近受到了严峻的考验。一位首席执行官在诸如 Spotify 案中的败诉之类的公开信上签字，实际上可能有能力做一些大事。</p></blockquote><hr><h2 id=书影>书影
<a class=heading-link href=#%e4%b9%a6%e5%bd%b1><i class="fa fa-link" aria-hidden=true title=链接到标题></i>
<span class=sr-only>链接到标题</span></a></h2><p>《酒鬼都市少女们》，能有一起喝酒的朋友很重要，喝酒不重要，朋友很重要。</p><p>《别对我动心》，国产恋爱剧，周也的作品之前看过《少年的你》 和《孤注一掷》，感觉还是《少年的你》中的反派少女比较出彩。</p><p>《93国际列车大劫案：莫斯科行动》，有些无聊，传统影视作品中，大家不是搞了黑道生意之后都追求洗白么，怎么还会在一条路上走到黑的。引用豆瓣评论：“我真的受够了女人是工具，伤害就是强奸的戏码，受够了孩子是软肋的剧情。” ，类似的还有前阵子张艺谋的《第二十条》。</p><p>《多谈谈问题》，长篇采访合集，目前读了第一篇，很好看，推荐。</p><h2 id=碎碎念>碎碎念
<a class=heading-link href=#%e7%a2%8e%e7%a2%8e%e5%bf%b5><i class="fa fa-link" aria-hidden=true title=链接到标题></i>
<span class=sr-only>链接到标题</span></a></h2><ul><li>Linkedin Blog 的 RSS 破罐子破摔了？彻底不维护了？印象中这是从 Uber 之后的第二个大公司不维护 RSS 了。</li><li><blockquote><p>大家对做开源的公司有一些错误的期望：工程师文化、工作强度、职业生涯。</p></blockquote></li><li>鸟山明去世了，这真是我小学期间，为数不多的记忆。</li></ul></div><footer><div id=disqus_thread></div><script>window.disqus_config=function(){},function(){if(["localhost","127.0.0.1"].indexOf(window.location.hostname)!=-1){document.getElementById("disqus_thread").innerHTML="Disqus comments not available by default when the website is previewed locally.";return}var t=document,e=t.createElement("script");e.async=!0,e.src="//zdyxry.disqus.com/embed.js",e.setAttribute("data-timestamp",+new Date),(t.head||t.body).appendChild(e)}(),document.addEventListener("themeChanged",function(){document.readyState=="complete"&&DISQUS.reset({reload:!0,config:disqus_config})})</script></footer></article></section></div><footer class=footer><section class=container>©
2016 -
2024
Yiran Zhou
·
技术支持 <a href=https://gohugo.io/>Hugo</a> & <a href=https://github.com/luizdepra/hugo-coder/>Coder</a>.</section></footer></main><script src=/js/coder.min.6ae284be93d2d19dad1f02b0039508d9aab3180a12a06dcc71b0b0ef7825a317.js integrity="sha256-auKEvpPS0Z2tHwKwA5UI2aqzGAoSoG3McbCw73gloxc="></script>
<script async src="https://www.googletagmanager.com/gtag/js?id=G-G0433XDZ3V"></script>
<script>var doNotTrack=!1;if(!doNotTrack){window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-G0433XDZ3V",{anonymize_ip:!1})}</script></body></html>