<!doctype html><html lang=zh-cn><head><title>Weekly Issue 2024-03-24 · Yiran's Blog</title><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=color-scheme content="light dark"><meta name=author content="Yiran Zhou"><meta name=description content="难。"><meta name=keywords content="blog,developer,personal"><meta name=twitter:card content="summary"><meta name=twitter:title content="Weekly Issue 2024-03-24"><meta name=twitter:description content="难。"><meta property="og:title" content="Weekly Issue 2024-03-24"><meta property="og:description" content="难。"><meta property="og:type" content="article"><meta property="og:url" content="https://zdyxry.github.io/2024/03/24/Weekly-Issue-2024-03-24/"><meta property="article:section" content="posts"><meta property="article:published_time" content="2024-03-24T00:00:00+00:00"><meta property="article:modified_time" content="2024-03-24T00:00:00+00:00"><link rel=canonical href=https://zdyxry.github.io/2024/03/24/Weekly-Issue-2024-03-24/><link rel=preload href="/fonts/forkawesome-webfont.woff2?v=1.2.0" as=font type=font/woff2 crossorigin><link rel=stylesheet href=/css/coder.min.76ce9bad7ac9bd368d486c6e91e7e0906fff71d9d35ccbf93959a375e2bf50e5.css integrity="sha256-ds6brXrJvTaNSGxukefgkG//cdnTXMv5OVmjdeK/UOU=" crossorigin=anonymous media=screen><link rel=stylesheet href=/css/coder-dark.min.593028e7f7ac55c003b79c230d1cd411bb4ca53b31556c3abb7f027170e646e9.css integrity="sha256-WTAo5/esVcADt5wjDRzUEbtMpTsxVWw6u38CcXDmRuk=" crossorigin=anonymous media=screen><link rel=icon type=image/png href=/images/yiran.png sizes=32x32><link rel=icon type=image/png href=/images/yiran.png sizes=16x16><link rel=apple-touch-icon href=/images/apple-touch-icon.png><link rel=apple-touch-icon sizes=180x180 href=/images/apple-touch-icon.png><link rel=manifest href=/site.webmanifest><link rel=mask-icon href=/images/safari-pinned-tab.svg color=#5bbad5><meta name=generator content="Hugo 0.101.0"></head><body class="preload-transitions colorscheme-auto"><div class=float-container><a id=dark-mode-toggle class=colorscheme-toggle><i class="fa fa-adjust fa-fw" aria-hidden=true></i></a></div><main class=wrapper><nav class=navigation><section class=container><a class=navigation-title href=/>Yiran's Blog</a>
<input type=checkbox id=menu-toggle>
<label class="menu-button float-right" for=menu-toggle><i class="fa fa-bars fa-fw" aria-hidden=true></i></label><ul class=navigation-list><li class=navigation-item><a class=navigation-link href=/posts/>Blog</a></li><li class=navigation-item><a class=navigation-link href=/tags/>Tags</a></li><li class=navigation-item><a class=navigation-link href=/friends/>Friends</a></li><li class=navigation-item><a class=navigation-link href=/about/>About</a></li></ul></section></nav><div class=content><section class="container post"><article><header><div class=post-title><h1 class=title><a class=title-link href=https://zdyxry.github.io/2024/03/24/Weekly-Issue-2024-03-24/>Weekly Issue 2024-03-24</a></h1></div><div class=post-meta><div class=date><span class=posted-on><i class="fa fa-calendar" aria-hidden=true></i>
<time datetime=2024-03-24T00:00:00Z>March 24, 2024</time></span>
<span class=reading-time><i class="fa fa-clock-o" aria-hidden=true></i>
阅读时间：2 分钟</span></div><div class=tags><i class="fa fa-tag" aria-hidden=true></i>
<span class=tag><a href=/tags/Weekly/>Weekly</a></span></div></div></header><nav id=TableOfContents><ul><li><a href=#文章>文章</a><ul><li><a href=#技术>技术</a></li><li><a href=#生活>生活</a></li></ul></li><li><a href=#书影>书影</a></li><li><a href=#碎碎念>碎碎念</a></li></ul></nav><div class=post-content><h2 id=文章>文章
<a class=heading-link href=#%e6%96%87%e7%ab%a0><i class="fa fa-link" aria-hidden=true title=链接到标题></i>
<span class=sr-only>链接到标题</span></a></h2><h3 id=技术>技术
<a class=heading-link href=#%e6%8a%80%e6%9c%af><i class="fa fa-link" aria-hidden=true title=链接到标题></i>
<span class=sr-only>链接到标题</span></a></h3><p><a href=https://zhuanlan.zhihu.com/p/686954625>字节跳动新型网络装机方案HTTPBOOT(Linux)，轻松解决运维困扰 - 知乎</a></p><p>[[字节跳动]] 网络安装操作系统方案，采用 LinuxRoot 配合 u-root 来实现。</p><hr><p><a href=https://certomodo.io/best-practices/in-defense-of-shell-scripts.html>In Defense of Shell Scripts</a></p><p>对于 [[shell]] 所能做到的事情，一直是毫不怀疑的，甚至如果日常中有什么需要快速实现的，我也会选择 [[shell]]，但是如果要产品化的话，选择其他编程语言是一个正确的选择。</p><p>我在工作中维护的组件涉及到很多与磁盘交互的功能，比如分区、格式化，这些是符合作者所说的“When CLI tools are available, and APIs aren’t”，随着功能的迭代，分支的增多，无法快速的编写单测，现在带来的测试负担已经非常重了。</p><hr><p><a href=https://docs.docker.com/compose/compose-file/10-fragments/>Fragments | Docker Docs</a></p><p>[[docker]] [[compose]] 的 Fragments 能力，可以用来创建复用的配置。示例：</p><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-fallback data-lang=fallback><span style=display:flex><span>services:
</span></span><span style=display:flex><span>  first:
</span></span><span style=display:flex><span>    image: my-image:latest
</span></span><span style=display:flex><span>    environment: &amp;env
</span></span><span style=display:flex><span>      - CONFIG_KEY
</span></span><span style=display:flex><span>      - EXAMPLE_KEY
</span></span><span style=display:flex><span>      - DEMO_VAR
</span></span><span style=display:flex><span>  second:
</span></span><span style=display:flex><span>    image: another-image:latest
</span></span><span style=display:flex><span>    environment: *env
</span></span></code></pre></div><hr><p><a href=https://blog.palark.com/sre-troubleshooting-ceph-systemd-containerd/>Recent troubleshooting cases from our SREs, part 5. An unexpected crash due to unrelated software changes – Palark | Blog</a></p><p>[[Palark]] 内部 [[kubernetes]] 集群 [[事故分析]]。</p><p>内部的日志存储系统运行在 [[kubernetes]] 上，依赖于 [[S3]]，[[S3]] 由使用 [[Rook]] 部署的 [[Ceph]] 集群提供。这套部署模式一致在不同的虚拟化环境和不同的发行版之间进行部署，都没有遇到问题。</p><p>[[Rook]] 在部署 Ceph 时，发现 Ceph 没有正常工作，Operator log 中包含大量的超时请求，日志中没有明显的错误，Monitor 只有在某个时刻收到的 TERM 信号。</p><p>尝试把 probe 禁掉，但是只是停止了重新启动，并没有更多用处。（通常如果我遇到被外部检测 kill 的情况，第一时间也会选择禁用外部检测，来看看是否只是因为某些其他原因 timeout。）</p><p>接着检查 infra 相关指标，比如硬盘状态、网络、防火墙、等等，没有发现。</p><p>接着排查 ROOK 自身，发现是 <code>ceph osd pool create</code> 命令导致的。</p><p>同时在 Github Issue 中找到了具体的原因：<a href=https://github.com/rook/rook/issues/10110#issuecomment-1464898937>Ceph monitors in crash loop · Issue #10110 · rook/rook · GitHub</a>：</p><p>最终是在 <code>containerd.service</code> 中添加 <code>LimitNOFILE=1048576</code> 作为临时方案。</p><p>为什么其他发行版没有这个问题？因为它们针对 systemd 打了相关的 patch。</p><hr><p><a href=https://twitter.com/realhashbreaker/status/1770161965006008570>X</a></p><p>[[md5]] 碰撞的真实例子，是可打印的 ASCII 发生冲突。</p><p>md5(&ldquo;TEXTCOLLBYfGiJUETHQ4hAcKSMd5zYpgqf1YRDhkmxHkhPWptrkoyz28wnI9V0aHeAuaKnak&rdquo;) = md5(&ldquo;TEXTCOLLBYfGiJUETHQ4hEcKSMd5zYpgqf1YRDhkmxHkhPWptrkoyz28wnI9V0aHeAuaKnak&rdquo;)</p><hr><p><a href=https://stripe.com/en-ca/annual-updates/2023>Stripe’s 2023 annual letter</a></p><p>[[Stripe]] 的年终总结，处理了 1 万亿美元，相当于全球 GDP 的 1%。</p><p>Stripe 核心 API 服务每天会发生 400 次的变更，提交代码后，就会通过 140 万次测试进行验证。每天使用 50 万个 CPU 核心执行超过 60 亿次测试运行。测试范围不断扩大：从简单的样式检查，到单独验证每个组件的单元测试，再到验证端到端系统是否按预期工作的集成测试。如果更改未通过任何测试，则部署停止。</p><hr><p><a href=https://redis.com/blog/redis-adopts-dual-source-available-licensing/>Redis Adopts Dual Source-Available Licensing | Redis</a></p><p>[[redis]] 更改了相关开源协议的说明。对于提供 [[redis]] 竞争服务的公司，无法继续使用后续版本的 [[redis]]。</p><hr><h3 id=生活>生活
<a class=heading-link href=#%e7%94%9f%e6%b4%bb><i class="fa fa-link" aria-hidden=true title=链接到标题></i>
<span class=sr-only>链接到标题</span></a></h3><p><a href=https://twitter.com/nikitabier/status/1768304243620880766>X 上的 Nikita Bier：“At Facebook, I coined a term called Filipino Product Market-Fit: Every year a product manager would observe their new product getting intense adoption in the Phillipines and proclaim their idea was working. Directors would quickly staff the team and alert their VPs of the…” / X</a></p><p>在 Facebook，我创造了一个术语“菲律宾产品市场契合度”： 每年，产品经理都会观察到他们的新产品在菲律宾得到广泛采用，并宣称他们的想法正在发挥作用。主管们会迅速为团队配备人员，并向副总裁通报这一新发现，结果却发现这种模式在其他国家无法重现。菲律宾是世界上上网时间最长的国家之一，他们会在几天内尝试任何事情。</p><hr><p><a href=https://www.bloomberg.com/news/articles/2024-03-20/musk-s-neuralink-gives-update-on-first-brain-implant-patient>Musk’s Neuralink Shows First Patient Playing Chess With Mind</a></p><p>[[Neuralink]] 脑机接口已经可以玩游戏了，感觉是跨时代的发展。</p><hr><p><a href=https://digua.moe/posts/20240311-meituan-rider.html>美团骑手转职指南 | 地瓜的博客</a></p><p>作者本职工作是一名程序员，在周末体验了两天美团骑手。</p><ul><li>不要点过于便宜的外卖：<ul><li>第一天抢到一个猪脚饭的单子，顾客实付 23.38，我拿到 10.7 的配送费，震惊到我，外加 4.7 元的配送奖励，相当于我从这单里赚了 15.4 元。</li></ul></li></ul><hr><h2 id=书影>书影
<a class=heading-link href=#%e4%b9%a6%e5%bd%b1><i class="fa fa-link" aria-hidden=true title=链接到标题></i>
<span class=sr-only>链接到标题</span></a></h2><p>《炸鸡块奇遇记》，很难评。</p><h2 id=碎碎念>碎碎念
<a class=heading-link href=#%e7%a2%8e%e7%a2%8e%e5%bf%b5><i class="fa fa-link" aria-hidden=true title=链接到标题></i>
<span class=sr-only>链接到标题</span></a></h2><ul><li>如果你期待大众都理解你 那你得愚昧成什么样。</li><li>XG（ Xtraordinary Girls 的缩写）是一个总部位于韩国的日本女子组合。Cocona 的 RAP 真好听啊</li><li></li></ul></div><footer><div id=disqus_thread></div><script>window.disqus_config=function(){},function(){if(["localhost","127.0.0.1"].indexOf(window.location.hostname)!=-1){document.getElementById("disqus_thread").innerHTML="Disqus comments not available by default when the website is previewed locally.";return}var t=document,e=t.createElement("script");e.async=!0,e.src="//zdyxry.disqus.com/embed.js",e.setAttribute("data-timestamp",+new Date),(t.head||t.body).appendChild(e)}(),document.addEventListener("themeChanged",function(){document.readyState=="complete"&&DISQUS.reset({reload:!0,config:disqus_config})})</script></footer></article></section></div><footer class=footer><section class=container>©
2016 -
2024
Yiran Zhou
·
技术支持 <a href=https://gohugo.io/>Hugo</a> & <a href=https://github.com/luizdepra/hugo-coder/>Coder</a>.</section></footer></main><script src=/js/coder.min.6ae284be93d2d19dad1f02b0039508d9aab3180a12a06dcc71b0b0ef7825a317.js integrity="sha256-auKEvpPS0Z2tHwKwA5UI2aqzGAoSoG3McbCw73gloxc="></script>
<script async src="https://www.googletagmanager.com/gtag/js?id=G-G0433XDZ3V"></script>
<script>var doNotTrack=!1;if(!doNotTrack){window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-G0433XDZ3V",{anonymize_ip:!1})}</script></body></html>