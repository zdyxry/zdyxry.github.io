<?xml version="1.0" encoding="utf-8" standalone="yes"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>Ops on Yiran's Blog</title><link>https://zdyxry.github.io/tags/Ops/</link><description>Recent content in Ops on Yiran's Blog</description><generator>Hugo -- gohugo.io</generator><language>en</language><lastBuildDate>Fri, 06 Jul 2018 15:28:09 +0000</lastBuildDate><atom:link href="https://zdyxry.github.io/tags/Ops/atom.xml" rel="self" type="application/rss+xml"/><item><title>Linux 主机异常信息收集</title><link>https://zdyxry.github.io/2018/07/06/Linux-%E4%B8%BB%E6%9C%BA%E5%BC%82%E5%B8%B8%E4%BF%A1%E6%81%AF%E6%94%B6%E9%9B%86/</link><pubDate>Fri, 06 Jul 2018 15:28:09 +0000</pubDate><guid>https://zdyxry.github.io/2018/07/06/Linux-%E4%B8%BB%E6%9C%BA%E5%BC%82%E5%B8%B8%E4%BF%A1%E6%81%AF%E6%94%B6%E9%9B%86/</guid><description>背景 Link to heading 通常情况下，一个公司内部都会有监控报警平台去支撑业务主机的稳定运行，比如 Nagios，Zabbix 或者 Prometheus 等其他工具。 这些工具，无论是 push 模式还是 pull 模式，都基于一个前提：主机是可访问的，或者说 agent/exporter 是可正常工作的。
如果运维人员在面对一台处于异常状态的主机，应该如何收集该主机的当前状态及相应日志呢？
企业级产品通常会内置工具用来采集异常状态信息，比如：
DELL 服务器如果出现了未知错误，拨打 400 询问问题， 一线客服会告诉你，打开 iDRAC 界面，点击“收集日志” 选项，会自动收集并下载节点信息 如果你是 RedHat RHEL 用户，主机出现异常状态，红帽技术支持工程师进行初始分析时，通常会使用 sosreport 工具 简介 Link to heading sosreport 命令是一个工具，用来收集 RHEL 系统上的配置信息、系统信息和诊断信息。比如：正在运行的内核版本、已加载的模块，以及系统和服务的配置文件。同时，sosreport 支持用户自己编写 Plugin ，用于收集自己想要收集的服务日志及命令结果。
使用 Link to heading sosreport 提供了 sosreport 命令行，用户可以直接执行该命令收集信息，默认收集所有 Plugin 信息。
执行流程 Link to heading 通过 which 命令查看提供 sosreport 命令行的文件，可以看到指向 sos.sosreport.main。
root@yiran-30-250:~/project/sos master ✔ $ which sosreport /usr/sbin/sosreport root@yiran-30-250:~/project/sos master ✔ $ cat /usr/sbin/sosreport #!</description></item></channel></rss>