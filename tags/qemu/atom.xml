<?xml version="1.0" encoding="utf-8" standalone="yes"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>qemu on Yiran's Blog</title><link>https://zdyxry.github.io/tags/qemu/</link><description>Recent content in qemu on Yiran's Blog</description><generator>Hugo -- gohugo.io</generator><language>en</language><lastBuildDate>Thu, 16 Nov 2017 22:34:48 +0000</lastBuildDate><atom:link href="https://zdyxry.github.io/tags/qemu/atom.xml" rel="self" type="application/rss+xml"/><item><title>I/O bursts with QEMU 2.6</title><link>https://zdyxry.github.io/2017/11/16/I/O-bursts-with-QEMU-2.6/</link><pubDate>Thu, 16 Nov 2017 22:34:48 +0000</pubDate><guid>https://zdyxry.github.io/2017/11/16/I/O-bursts-with-QEMU-2.6/</guid><description>I/O bursts with QEMU 2.6
近期在工作中要进行存储系统的 QOS 验证.公司 QOS 的实现方式参考了 QEMU 中的实现方式, 找来相关资料学习一下.
基本配置 链接到标题 首先,我将总结 QEMU 早期版本中已有的基本配置. 磁盘 I/O 有两处可以被限制的方式: 每秒钟字节数(bps) 和 每秒钟操作数( IOPS) . 对于它们中的每一种限制,用户既可以进行全局配置,也可以针对读写进行单独限制. 下面列举了总共 6 个不同的参数. I/O 限制可以使用 -dirve 参数中的 throttling ,或者使用 QMP 中的 blocks_set_io_throttle 命令. 下面是两种情况下的参数列举:
{ -DRIVE BLOCK_SET_IO_THROTTLE throttling.iops-total iops throttling.iops-read iops_rd throttling.iops-write iops_wr throttling.bps-total bps throttling.bps-read bps_rd throttling.bps-write bps_wr } 可以同时配置 IOPS 和 bps ,针对不同的场景我们可以选择是否配置读写限制,但是如果设置了 iops-total 参数, 那么不能配置 iops-read 和 iops-write. 这个规则同样适用于 bps-total 和 bps-read/write.</description></item></channel></rss>