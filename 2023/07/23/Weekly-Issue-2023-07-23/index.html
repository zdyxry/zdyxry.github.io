<!doctype html><html lang=zh-cn><head><title>Weekly Issue 2023-07-23 · Yiran's Blog</title><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=color-scheme content="light dark"><meta name=author content="Yiran Zhou"><meta name=description content="自动化所有需要重复2次以上的动作。"><meta name=keywords content="blog,developer,personal"><meta name=twitter:card content="summary"><meta name=twitter:title content="Weekly Issue 2023-07-23"><meta name=twitter:description content="自动化所有需要重复2次以上的动作。"><meta property="og:title" content="Weekly Issue 2023-07-23"><meta property="og:description" content="自动化所有需要重复2次以上的动作。"><meta property="og:type" content="article"><meta property="og:url" content="https://zdyxry.github.io/2023/07/23/Weekly-Issue-2023-07-23/"><meta property="article:section" content="posts"><meta property="article:published_time" content="2023-07-23T00:00:00+00:00"><meta property="article:modified_time" content="2023-07-23T00:00:00+00:00"><link rel=canonical href=https://zdyxry.github.io/2023/07/23/Weekly-Issue-2023-07-23/><link rel=preload href="/fonts/forkawesome-webfont.woff2?v=1.2.0" as=font type=font/woff2 crossorigin><link rel=stylesheet href=/css/coder.min.76ce9bad7ac9bd368d486c6e91e7e0906fff71d9d35ccbf93959a375e2bf50e5.css integrity="sha256-ds6brXrJvTaNSGxukefgkG//cdnTXMv5OVmjdeK/UOU=" crossorigin=anonymous media=screen><link rel=stylesheet href=/css/coder-dark.min.593028e7f7ac55c003b79c230d1cd411bb4ca53b31556c3abb7f027170e646e9.css integrity="sha256-WTAo5/esVcADt5wjDRzUEbtMpTsxVWw6u38CcXDmRuk=" crossorigin=anonymous media=screen><link rel=icon type=image/png href=/images/yiran.png sizes=32x32><link rel=icon type=image/png href=/images/yiran.png sizes=16x16><link rel=apple-touch-icon href=/images/apple-touch-icon.png><link rel=apple-touch-icon sizes=180x180 href=/images/apple-touch-icon.png><link rel=manifest href=/site.webmanifest><link rel=mask-icon href=/images/safari-pinned-tab.svg color=#5bbad5><meta name=generator content="Hugo 0.101.0"></head><body class="preload-transitions colorscheme-auto"><div class=float-container><a id=dark-mode-toggle class=colorscheme-toggle><i class="fa fa-adjust fa-fw" aria-hidden=true></i></a></div><main class=wrapper><nav class=navigation><section class=container><a class=navigation-title href=/>Yiran's Blog</a>
<input type=checkbox id=menu-toggle>
<label class="menu-button float-right" for=menu-toggle><i class="fa fa-bars fa-fw" aria-hidden=true></i></label><ul class=navigation-list><li class=navigation-item><a class=navigation-link href=/posts/>Blog</a></li><li class=navigation-item><a class=navigation-link href=/tags/>Tags</a></li><li class=navigation-item><a class=navigation-link href=/friends/>Friends</a></li><li class=navigation-item><a class=navigation-link href=/about/>About</a></li></ul></section></nav><div class=content><section class="container post"><article><header><div class=post-title><h1 class=title><a class=title-link href=https://zdyxry.github.io/2023/07/23/Weekly-Issue-2023-07-23/>Weekly Issue 2023-07-23</a></h1></div><div class=post-meta><div class=date><span class=posted-on><i class="fa fa-calendar" aria-hidden=true></i>
<time datetime=2023-07-23T00:00:00Z>July 23, 2023</time></span>
<span class=reading-time><i class="fa fa-clock-o" aria-hidden=true></i>
阅读时间：2 分钟</span></div><div class=tags><i class="fa fa-tag" aria-hidden=true></i>
<span class=tag><a href=/tags/Weekly/>Weekly</a></span></div></div></header><nav id=TableOfContents><ul><li><a href=#文章>文章</a><ul><li><a href=#技术>技术</a></li><li><a href=#生活>生活</a></li></ul></li><li><a href=#书影>书影</a></li></ul></nav><div class=post-content><h2 id=文章>文章
<a class=heading-link href=#%e6%96%87%e7%ab%a0><i class="fa fa-link" aria-hidden=true title=链接到标题></i>
<span class=sr-only>链接到标题</span></a></h2><h3 id=技术>技术
<a class=heading-link href=#%e6%8a%80%e6%9c%af><i class="fa fa-link" aria-hidden=true title=链接到标题></i>
<span class=sr-only>链接到标题</span></a></h3><p><a href=https://gitlab.com/gitlab-com/gl-infra/production/-/issues/15999>Incident Review for Site-wide Outage for GitLab.com - Stale Terraform Pipeline #15997 (#15999) · Issues · GitLab.com / GitLab Infrastructure Team / production · GitLab</a></p><p>[[Gitlab]] 对[[Terraform]] 使用不当导致故障的[[事故分析]]。在变更请求过程中,触发了一个过期的Terraform流水线。这导致一个过时的Terraform计划被应用到生产环境。同样的操作之前多次执行都没有问题。导致这次故障的原因是应用变更到生产环境有较长延迟(约3周)。用于资源重建的已知良好的流水线变得过时,并且由于最近的更改而导致配置漂移。</p><p>[[Atlantis]] 的存在是有道理的，它在前面拦一道，可以有效避免一些平时不容易注意到，但是一但发生会造成 S0 级别事故的 TF 灾难。 对抗人的不精确性的简单办法其实就是增加流程的安全性。 from: @kivinsae</p><p>额外的故事： [[Gitlab]] 因为自身故障，导致团队协作无法使用 [[Gitlab]]，只能去使用 Google Doc。</p><hr><p><a href=https://www.mattlayman.com/blog/2019/failed-saas-postmortem/>A Failed SaaS Postmortem · Matt Layman</a></p><p>作者在尝试做一个项目时，使用了自己不那么熟悉的技术栈，并且在软件依赖的更新上花费了大量的时间，又忽略了最终用户的感受，导致结果是不好的。在 MVP 阶段，应该保持技术栈简单，使用自己最熟悉的技术，来达到用户的期望。</p><hr><p><a href=https://www.redpoint.com/infrared/100/>https://www.redpoint.com/infrared/100/</a></p><p>[[Redpoint]] 选出的100 家做基础设施的[[公司]]。按类别划分：安全、数据 & AI、DevOps。</p><hr><p><a href=https://oilbeater.com/2023/07/19/pre-alloc-slice-for-golang/>Golang 中预分配 slice 内存对性能的影响| Oilbeater 的自习室</a></p><p>预分配 slice 容量，可以得到以下好处：</p><pre><code>1.  内存只需要一次分配，不需要反复分配。
2.  不需要反复进行数据复制。
3.  不需要反复对旧的 slice 进行垃圾回收。
4.  内存准确分配，不存在动态分配导致的容量浪费。
</code></pre><p>结论：无论 slice 规模大小，预分配带来的性能提升都是非常明显的。</p><p>可以在 [[CI]] 中使用 <a href=https://github.com/alexkohler/prealloc/tree/master>prealloc</a> 来自动检测。</p><hr><p><a href=https://www.kawabangga.com/posts/5217>TCP 长连接 CWND reset 的问题分析 | 卡瓦邦噶！</a></p><p>[[TCP]] <code>net.ipv4.tcp_slow_start_after_idle</code> 导致服务延迟高。</p><blockquote><p>拥塞控制算法使用收到的 ACK 来确认网络质量从而避免拥塞，但是在 idle 了一段时间之后，没有 ACK 在传输，拥塞控制算法所保存的状态可能已经不能反映此时的网络情况了，比如发送了一波数据，直到发送完成的时候网络都比较空闲，然后连接 idle 了 10s，又要开始发数据，此时网络恰好负载比较高，如果 TCP 使用 10s 之前的知识去重新开始发送数据的话，就会造成拥塞；另外，10s 之后即使网络负载没变，网络环境可能变了（路由表切换之类的？），同样会造成 10s 之前的知识已经不适用了。</p></blockquote><hr><p><a href=https://blog.cloudflare.com/the-day-my-ping-took-countermeasures/>The day my ping took countermeasures</a></p><p>作者在ping一个地址时，看到了一个异常的“taking countermeasures”信息，这是由于计算机时钟向后调整导致的。在尝试复现问题时，使用 <code>LD_PRELOAD</code> 来加载一个自定义的 [[vdso]] 程序自定义获取时间方式（注意如果目标程序有 <code>suid</code> 权限，那么 <code>LD_PRELOAD</code> 会被忽略），并通过 strace 的 <code>Tampering</code> 能力进行故障注入模拟异常情况。</p><p>配合阅读： <a href=https://chaos-mesh.org/blog/simulating-clock-skew-in-k8s-without-affecting-other-containers-on-node/>Simulating Clock Skew in K8s Without Affecting Other Containers on the Node | Chaos Mesh</a></p><p>疑问，[[Ping]] 现在需要 <code>suid</code> 么？记得以前是需要的，现在好像不需要了，我看了眼自己的开发机（Arch Linux），已经不存在 <code>suid</code> 了，这是什么时候改的？与 <code>net.ipv4.ping_group_range</code> 有关么？与 <code>CAP_NET_RAW</code> 有关么？</p><p>答：最初 <code>ping</code> 是需要 <code>suid</code> 权限的，也会设置 <code>CAP_NET_RAW</code> 能力，因为需要使用 RAW Sockets 来发送和接收 ICMP ECHO 请求和回复，也就需要 root 权限，但是这引入了安全问题。
[[kernel]] 在 3.11 版本引入了<code>net.ipv4.ping_group_range</code> 参数，定义了一个用户组 ID 范围，在这个范围内的用不都可以发送 ICMP ECHO 请求，无需 root 权限。</p><h3 id=生活>生活
<a class=heading-link href=#%e7%94%9f%e6%b4%bb><i class="fa fa-link" aria-hidden=true title=链接到标题></i>
<span class=sr-only>链接到标题</span></a></h3><p><a href=https://m.thepaper.cn/baijiahao_19834121>伤口愈合的新理念——湿性愈合简介</a></p><p><a href=https://zhuanlan.zhihu.com/p/378092892>我自己的亲身试验&ndash;伤口的湿性愈合 - 知乎</a></p><p>[[湿性愈合]]，可以快速让伤口愈合，不经历结痂过程，看上去只有好处没有坏处？</p><hr><p><a href=https://www.zhihu.com/question/55504311/answer/145021306>你是如何逐渐对曾经深信不疑的东西产生怀疑的？</a></p><blockquote><p>他们用自己的三十年的经历，深信不疑，只要敢于闯，敢于干，遍地都是机会，人人都能完成阶级跃迁。<br><strong>正常的人生都要实现阶级跃迁，如果你没做到，那一定是你不努力，不够优秀。</strong><br><strong>一个人的选择，忽略了对历史的行程的研究，注定是一个巨大的悲剧。</strong></p></blockquote><blockquote><p>被这种作废的理念指导一步步求学，走上社会的85-95年龄段的子女们，都终将在人生二十多岁的年纪上经历一次深夜怀疑人生式的痛哭。</p></blockquote><hr><p><a href="https://www.zhihu.com/question/38890974/answer/3091786880?utm_id=0">为什么国人的旅游方式普遍特别累？</a></p><p>大部分看到的旅游分享，并不是那么悠闲的，而是带有极强的功利性的旅游，旅游不是一种休息，反而是另外一种竞争。我自己出门好像就有这个问题，总想在当地的时间多留意一些，生怕自己错过了些什么。</p><hr><p><a href=https://world.hey.com/jason/who-do-you-do-business-with-47c6c9d5>Who do you do business with?</a></p><p>选择你的业务伙伴时，要考虑他们是否关心长期关系和客户服务，而不仅仅是完成一笔交易。选择合适的人的重要性往往大于一笔生意。</p><hr><p><a href=https://blog.alexewerlof.com/p/calendar-defragmentation>Calendar Defragmentation - Alex Ewerlöf Notes</a></p><p>很多时候开会的时间不是自己所能决定的，都是被动开会，一天的时间被拆分的零零散散，我会尝试预留一些零碎的工作“塞”到对应的时间片，自我保证不会因为上下文频繁切换导致效率过低。</p><hr><h2 id=书影>书影
<a class=heading-link href=#%e4%b9%a6%e5%bd%b1><i class="fa fa-link" aria-hidden=true title=链接到标题></i>
<span class=sr-only>链接到标题</span></a></h2><p>《盐镇》，苦，太苦了，与《大医》的那种苦不同，这是《活着》的那种苦。我是在读《飞行家》的时候觉得有点苦，然后换了到《盐镇》，结果一比较，《飞行家》不算什么了。如果说东北作家写”苦难“是小刀割手，那么易小荷写”苦难“就是大刀斩头。目前只读了第一个故事，让我想家了，想回家看看奶奶。</p><p>《NPR 播客入门指南》，自己今年在播客上的时间很多，可能有大几百个小时，在收听的时候也时常在想，现在播客的制作方式、节目分类、听众目标是否已经固定（没有更多花活了），一些音乐电台类播客，是怎么处理版权问题的（事实证明他们是完全没有版权的，引用原曲15s 以上就可以构成侵权）。这本书是很合格的工具书，也解答了我的一些疑问，如果准备做播客的人看这本书应该收获不小。</p><p>《曾少年》，朋友推荐的国产剧，在大时代的背景下几个年轻人的生活日志，大家都面临各自的困难，其中有一些困难自己也将要面临了，不知道能否以平和的心态去面对。剧中千喜这个角色挺有趣的，很知道自己想要什么，同时也知道自己在得到的过程中会失去什么，也舍得去失去。</p></div><footer><div id=disqus_thread></div><script>window.disqus_config=function(){},function(){if(["localhost","127.0.0.1"].indexOf(window.location.hostname)!=-1){document.getElementById("disqus_thread").innerHTML="Disqus comments not available by default when the website is previewed locally.";return}var t=document,e=t.createElement("script");e.async=!0,e.src="//zdyxry.disqus.com/embed.js",e.setAttribute("data-timestamp",+new Date),(t.head||t.body).appendChild(e)}(),document.addEventListener("themeChanged",function(){document.readyState=="complete"&&DISQUS.reset({reload:!0,config:disqus_config})})</script></footer></article></section></div><footer class=footer><section class=container>©
2016 -
2023
Yiran Zhou
·
技术支持 <a href=https://gohugo.io/>Hugo</a> & <a href=https://github.com/luizdepra/hugo-coder/>Coder</a>.</section></footer></main><script src=/js/coder.min.6ae284be93d2d19dad1f02b0039508d9aab3180a12a06dcc71b0b0ef7825a317.js integrity="sha256-auKEvpPS0Z2tHwKwA5UI2aqzGAoSoG3McbCw73gloxc="></script>
<script async src="https://www.googletagmanager.com/gtag/js?id=G-G0433XDZ3V"></script>
<script>var doNotTrack=!1;if(!doNotTrack){window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-G0433XDZ3V",{anonymize_ip:!1})}</script></body></html>