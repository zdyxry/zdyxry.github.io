<!doctype html><html lang=zh-cn><head><title>Pure Bash Bible · Yiran's Blog</title><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=color-scheme content="light dark"><meta name=author content="Yiran Zhou"><meta name=description content="背景 链接到标题 逛 Github Trending 的时候，发现一个叫 pure bash bible 的项目，这个项目主要是介绍一些常用功能的 Bash 实现。 在日常使用中，Bash 作为大部分 Linux 发行版的默认 Shell 是使用最多的，尤其是进行一些简单的自动处理事件上很方便。但是我使用的时候通常会用 Bash、Sed、Awk、cut、timeout 等一些 Linux 命令相互配合使用。 如果你要维护的 Server 是一个比较少见的版本，比如：ESXi 5.0、XenServer 6.0 等版本，那么就会导致有些命令是缺失的，且无法安装，这时候就需要单独使用 Bash 来实现一些其他命令的功能。 pure bash bible 这个项目列举了很多常用常用功能，有一些比较有借鉴意义，在此记录。
字符串 链接到标题 删除字符串前后空格 链接到标题 trim_string（）{ # Ups：trim_string“example string” ： “ $ {1 ＃” $ {1 %% [！[：space：]] * } “ } ” ： “ $ {_ ％” $ {_ ## * [！[：space：]]} “ } ” printf '％s \ n ' “ $ _ ” } $ trim_string “ Hello，World ” Hello, World $ name = “ John Black ” $ trim_string “ $ name ” John Black 删除字符串中所有空格 链接到标题 # shellcheck disable=SC2086,SC2048 trim_all() { # Usage: trim_all &#34; example string &#34; set -f set -- $* printf '%s\n' &#34;$*&#34; set +f } $ trim_all &#34; Hello, World &#34; Hello, World $ name=&#34; John Black is my name."><meta name=keywords content="blog,developer,personal"><meta name=twitter:card content="summary"><meta name=twitter:title content="Pure Bash Bible"><meta name=twitter:description content="背景 链接到标题 逛 Github Trending 的时候，发现一个叫 pure bash bible 的项目，这个项目主要是介绍一些常用功能的 Bash 实现。 在日常使用中，Bash 作为大部分 Linux 发行版的默认 Shell 是使用最多的，尤其是进行一些简单的自动处理事件上很方便。但是我使用的时候通常会用 Bash、Sed、Awk、cut、timeout 等一些 Linux 命令相互配合使用。 如果你要维护的 Server 是一个比较少见的版本，比如：ESXi 5.0、XenServer 6.0 等版本，那么就会导致有些命令是缺失的，且无法安装，这时候就需要单独使用 Bash 来实现一些其他命令的功能。 pure bash bible 这个项目列举了很多常用常用功能，有一些比较有借鉴意义，在此记录。
字符串 链接到标题 删除字符串前后空格 链接到标题 trim_string（）{ # Ups：trim_string“example string” ： “ $ {1 ＃” $ {1 %% [！[：space：]] * } “ } ” ： “ $ {_ ％” $ {_ ## * [！[：space：]]} “ } ” printf '％s \ n ' “ $ _ ” } $ trim_string “ Hello，World ” Hello, World $ name = “ John Black ” $ trim_string “ $ name ” John Black 删除字符串中所有空格 链接到标题 # shellcheck disable=SC2086,SC2048 trim_all() { # Usage: trim_all &#34; example string &#34; set -f set -- $* printf '%s\n' &#34;$*&#34; set +f } $ trim_all &#34; Hello, World &#34; Hello, World $ name=&#34; John Black is my name."><meta property="og:title" content="Pure Bash Bible"><meta property="og:description" content="背景 链接到标题 逛 Github Trending 的时候，发现一个叫 pure bash bible 的项目，这个项目主要是介绍一些常用功能的 Bash 实现。 在日常使用中，Bash 作为大部分 Linux 发行版的默认 Shell 是使用最多的，尤其是进行一些简单的自动处理事件上很方便。但是我使用的时候通常会用 Bash、Sed、Awk、cut、timeout 等一些 Linux 命令相互配合使用。 如果你要维护的 Server 是一个比较少见的版本，比如：ESXi 5.0、XenServer 6.0 等版本，那么就会导致有些命令是缺失的，且无法安装，这时候就需要单独使用 Bash 来实现一些其他命令的功能。 pure bash bible 这个项目列举了很多常用常用功能，有一些比较有借鉴意义，在此记录。
字符串 链接到标题 删除字符串前后空格 链接到标题 trim_string（）{ # Ups：trim_string“example string” ： “ $ {1 ＃” $ {1 %% [！[：space：]] * } “ } ” ： “ $ {_ ％” $ {_ ## * [！[：space：]]} “ } ” printf '％s \ n ' “ $ _ ” } $ trim_string “ Hello，World ” Hello, World $ name = “ John Black ” $ trim_string “ $ name ” John Black 删除字符串中所有空格 链接到标题 # shellcheck disable=SC2086,SC2048 trim_all() { # Usage: trim_all &#34; example string &#34; set -f set -- $* printf '%s\n' &#34;$*&#34; set +f } $ trim_all &#34; Hello, World &#34; Hello, World $ name=&#34; John Black is my name."><meta property="og:type" content="article"><meta property="og:url" content="https://zdyxry.github.io/2018/08/11/Pure-Bash-Bible/"><meta property="article:section" content="posts"><meta property="article:published_time" content="2018-08-11T11:06:55+00:00"><meta property="article:modified_time" content="2018-08-11T11:06:55+00:00"><link rel=canonical href=https://zdyxry.github.io/2018/08/11/Pure-Bash-Bible/><link rel=preload href="/fonts/forkawesome-webfont.woff2?v=1.2.0" as=font type=font/woff2 crossorigin><link rel=stylesheet href=/css/coder.min.76ce9bad7ac9bd368d486c6e91e7e0906fff71d9d35ccbf93959a375e2bf50e5.css integrity="sha256-ds6brXrJvTaNSGxukefgkG//cdnTXMv5OVmjdeK/UOU=" crossorigin=anonymous media=screen><link rel=stylesheet href=/css/coder-dark.min.593028e7f7ac55c003b79c230d1cd411bb4ca53b31556c3abb7f027170e646e9.css integrity="sha256-WTAo5/esVcADt5wjDRzUEbtMpTsxVWw6u38CcXDmRuk=" crossorigin=anonymous media=screen><link rel=icon type=image/png href=/images/yiran.png sizes=32x32><link rel=icon type=image/png href=/images/yiran.png sizes=16x16><link rel=apple-touch-icon href=/images/apple-touch-icon.png><link rel=apple-touch-icon sizes=180x180 href=/images/apple-touch-icon.png><link rel=manifest href=/site.webmanifest><link rel=mask-icon href=/images/safari-pinned-tab.svg color=#5bbad5><meta name=generator content="Hugo 0.101.0"></head><body class="preload-transitions colorscheme-auto"><div class=float-container><a id=dark-mode-toggle class=colorscheme-toggle><i class="fa fa-adjust fa-fw" aria-hidden=true></i></a></div><main class=wrapper><nav class=navigation><section class=container><a class=navigation-title href=/>Yiran's Blog</a>
<input type=checkbox id=menu-toggle>
<label class="menu-button float-right" for=menu-toggle><i class="fa fa-bars fa-fw" aria-hidden=true></i></label><ul class=navigation-list><li class=navigation-item><a class=navigation-link href=/posts/>Blog</a></li><li class=navigation-item><a class=navigation-link href=/tags/>Tags</a></li><li class=navigation-item><a class=navigation-link href=/friends/>Friends</a></li><li class=navigation-item><a class=navigation-link href=/about/>About</a></li></ul></section></nav><div class=content><section class="container post"><article><header><div class=post-title><h1 class=title><a class=title-link href=https://zdyxry.github.io/2018/08/11/Pure-Bash-Bible/>Pure Bash Bible</a></h1></div><div class=post-meta><div class=date><span class=posted-on><i class="fa fa-calendar" aria-hidden=true></i>
<time datetime=2018-08-11T11:06:55Z>August 11, 2018</time></span>
<span class=reading-time><i class="fa fa-clock-o" aria-hidden=true></i>
阅读时间：3 分钟</span></div><div class=tags><i class="fa fa-tag" aria-hidden=true></i>
<span class=tag><a href=/tags/Bash/>Bash</a></span></div></div></header><nav id=TableOfContents><ul><li><a href=#背景>背景</a></li><li><a href=#字符串>字符串</a><ul><li><a href=#删除字符串前后空格>删除字符串前后空格</a></li><li><a href=#删除字符串中所有空格>删除字符串中所有空格</a></li><li><a href=#根据指定分隔符分隔字符串>根据指定分隔符分隔字符串</a></li></ul></li><li><a href=#数组>数组</a><ul><li><a href=#反转>反转</a></li><li><a href=#删除重复项>删除重复项</a></li><li><a href=#随机选择>随机选择</a></li></ul></li><li><a href=#文件>文件</a><ul><li><a href=#获取文件绝对路径>获取文件绝对路径</a></li><li><a href=#获取文件相对路径>获取文件相对路径</a></li></ul></li><li><a href=#进度条>进度条</a><ul><li><a href=#打印进度条>打印进度条</a></li></ul></li><li><a href=#总结>总结</a></li></ul></nav><div class=post-content><h2 id=背景>背景
<a class=heading-link href=#%e8%83%8c%e6%99%af><i class="fa fa-link" aria-hidden=true title=链接到标题></i>
<span class=sr-only>链接到标题</span></a></h2><p>逛 Github Trending 的时候，发现一个叫 <a href=https://github.com/dylanaraps/pure-bash-bible>pure bash bible</a> 的项目，这个项目主要是介绍一些常用功能的 Bash 实现。
在日常使用中，Bash 作为大部分 Linux 发行版的默认 Shell 是使用最多的，尤其是进行一些简单的自动处理事件上很方便。但是我使用的时候通常会用 Bash、Sed、Awk、cut、timeout 等一些 Linux 命令相互配合使用。
如果你要维护的 Server 是一个比较少见的版本，比如：ESXi 5.0、XenServer 6.0 等版本，那么就会导致有些命令是缺失的，且无法安装，这时候就需要单独使用 Bash 来实现一些其他命令的功能。
<code>pure bash bible</code> 这个项目列举了很多常用常用功能，有一些比较有借鉴意义，在此记录。</p><h2 id=字符串>字符串
<a class=heading-link href=#%e5%ad%97%e7%ac%a6%e4%b8%b2><i class="fa fa-link" aria-hidden=true title=链接到标题></i>
<span class=sr-only>链接到标题</span></a></h2><h3 id=删除字符串前后空格>删除字符串前后空格
<a class=heading-link href=#%e5%88%a0%e9%99%a4%e5%ad%97%e7%ac%a6%e4%b8%b2%e5%89%8d%e5%90%8e%e7%a9%ba%e6%a0%bc><i class="fa fa-link" aria-hidden=true title=链接到标题></i>
<span class=sr-only>链接到标题</span></a></h3><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-Bash data-lang=Bash><span style=display:flex><span>trim_string（）{ <span style=font-style:italic># Ups：trim_string“example string” </span>
</span></span><span style=display:flex><span>    ： “ $ {1 ＃” $ {1 %% [！[：space：]] * } “ } ”
</span></span><span style=display:flex><span>    ： “ $ {_ ％” $ {_ <span style=font-style:italic>## * [！[：space：]]} “ } ”</span>
</span></span><span style=display:flex><span>     printf  <span style=font-style:italic>&#39;％s \ n &#39;</span>  “ $ _ ” }
</span></span><span style=display:flex><span>$ trim_string “ Hello，World ” 
</span></span><span style=display:flex><span>Hello, World
</span></span><span style=display:flex><span>$ name = “ John Black ” $ trim_string “ $ name ” John Black
</span></span></code></pre></div><h3 id=删除字符串中所有空格>删除字符串中所有空格
<a class=heading-link href=#%e5%88%a0%e9%99%a4%e5%ad%97%e7%ac%a6%e4%b8%b2%e4%b8%ad%e6%89%80%e6%9c%89%e7%a9%ba%e6%a0%bc><i class="fa fa-link" aria-hidden=true title=链接到标题></i>
<span class=sr-only>链接到标题</span></a></h3><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-Bash data-lang=Bash><span style=display:flex><span><span style=font-style:italic># shellcheck disable=SC2086,SC2048</span>
</span></span><span style=display:flex><span>trim_all() {
</span></span><span style=display:flex><span>    <span style=font-style:italic># Usage: trim_all &#34;   example   string    &#34;</span>
</span></span><span style=display:flex><span>    set -f
</span></span><span style=display:flex><span>    set -- $*
</span></span><span style=display:flex><span>    printf <span style=font-style:italic>&#39;%s\n&#39;</span> <span style=font-style:italic>&#34;</span>$*<span style=font-style:italic>&#34;</span>
</span></span><span style=display:flex><span>    set +f
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>$ trim_all <span style=font-style:italic>&#34;    Hello,    World    &#34;</span>
</span></span><span style=display:flex><span>Hello, World
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>$ name=<span style=font-style:italic>&#34;   John   Black  is     my    name.    &#34;</span>
</span></span><span style=display:flex><span>$ trim_all <span style=font-style:italic>&#34;</span>$name<span style=font-style:italic>&#34;</span>
</span></span><span style=display:flex><span>John Black is my name.
</span></span></code></pre></div><h3 id=根据指定分隔符分隔字符串>根据指定分隔符分隔字符串
<a class=heading-link href=#%e6%a0%b9%e6%8d%ae%e6%8c%87%e5%ae%9a%e5%88%86%e9%9a%94%e7%ac%a6%e5%88%86%e9%9a%94%e5%ad%97%e7%ac%a6%e4%b8%b2><i class="fa fa-link" aria-hidden=true title=链接到标题></i>
<span class=sr-only>链接到标题</span></a></h3><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-fallback data-lang=fallback><span style=display:flex><span>split() {
</span></span><span style=display:flex><span>   # Usage: split &#34;string&#34; &#34;delimiter&#34;
</span></span><span style=display:flex><span>   IFS=$&#39;\n&#39; read -d &#34;&#34; -ra arr &lt;&lt;&lt; &#34;${1//$2/$&#39;\n&#39;}&#34;
</span></span><span style=display:flex><span>   printf &#39;%s\n&#39; &#34;${arr[@]}&#34;
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>$ split &#34;apples,oranges,pears,grapes&#34; &#34;,&#34;
</span></span><span style=display:flex><span>apples
</span></span><span style=display:flex><span>oranges
</span></span><span style=display:flex><span>pears
</span></span><span style=display:flex><span>grapes
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>$ split &#34;1, 2, 3, 4, 5&#34; &#34;, &#34;
</span></span><span style=display:flex><span>1
</span></span><span style=display:flex><span>2
</span></span><span style=display:flex><span>3
</span></span><span style=display:flex><span>4
</span></span><span style=display:flex><span>5
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span># Multi char delimiters work too!
</span></span><span style=display:flex><span>$ split &#34;hello---world---my---name---is---john&#34; &#34;---&#34;
</span></span><span style=display:flex><span>hello
</span></span><span style=display:flex><span>world
</span></span><span style=display:flex><span>my
</span></span><span style=display:flex><span>name
</span></span><span style=display:flex><span>is
</span></span><span style=display:flex><span>john
</span></span></code></pre></div><h2 id=数组>数组
<a class=heading-link href=#%e6%95%b0%e7%bb%84><i class="fa fa-link" aria-hidden=true title=链接到标题></i>
<span class=sr-only>链接到标题</span></a></h2><h3 id=反转>反转
<a class=heading-link href=#%e5%8f%8d%e8%bd%ac><i class="fa fa-link" aria-hidden=true title=链接到标题></i>
<span class=sr-only>链接到标题</span></a></h3><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-Bash data-lang=Bash><span style=display:flex><span>reverse_array() {
</span></span><span style=display:flex><span>    <span style=font-style:italic># Usage: reverse_array &#34;array&#34;</span>
</span></span><span style=display:flex><span>    shopt -s extdebug
</span></span><span style=display:flex><span>    f()(printf <span style=font-style:italic>&#39;%s\n&#39;</span> <span style=font-style:italic>&#34;</span><span style=font-weight:700;font-style:italic>${</span>BASH_ARGV[@]<span style=font-weight:700;font-style:italic>}</span><span style=font-style:italic>&#34;</span>); f <span style=font-style:italic>&#34;</span>$@<span style=font-style:italic>&#34;</span>
</span></span><span style=display:flex><span>    shopt -u extdebug
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>$ reverse_array 1 2 3 4 5
</span></span><span style=display:flex><span>5
</span></span><span style=display:flex><span>4
</span></span><span style=display:flex><span>3
</span></span><span style=display:flex><span>2
</span></span><span style=display:flex><span>1
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>$ arr=(red blue green)
</span></span><span style=display:flex><span>$ reverse_array <span style=font-style:italic>&#34;</span><span style=font-weight:700;font-style:italic>${</span>arr[@]<span style=font-weight:700;font-style:italic>}</span><span style=font-style:italic>&#34;</span>
</span></span><span style=display:flex><span>green
</span></span><span style=display:flex><span>blue
</span></span><span style=display:flex><span>red
</span></span></code></pre></div><h3 id=删除重复项>删除重复项
<a class=heading-link href=#%e5%88%a0%e9%99%a4%e9%87%8d%e5%a4%8d%e9%a1%b9><i class="fa fa-link" aria-hidden=true title=链接到标题></i>
<span class=sr-only>链接到标题</span></a></h3><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-Bash data-lang=Bash><span style=display:flex><span>remove_array_dups() {
</span></span><span style=display:flex><span>    <span style=font-style:italic># Usage: remove_array_dups &#34;array&#34;</span>
</span></span><span style=display:flex><span>    declare -A tmp_array
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=font-weight:700>for</span> i in <span style=font-style:italic>&#34;</span>$@<span style=font-style:italic>&#34;</span>; <span style=font-weight:700>do</span>
</span></span><span style=display:flex><span>        [[ <span style=font-style:italic>&#34;</span>$i<span style=font-style:italic>&#34;</span> ]] &amp;&amp; IFS=<span style=font-style:italic>&#34; &#34;</span> tmp_array[<span style=font-style:italic>&#34;</span><span style=font-weight:700;font-style:italic>${</span>i<span style=font-weight:700>:-</span> <span style=font-weight:700;font-style:italic>}</span><span style=font-style:italic>&#34;</span>]=1
</span></span><span style=display:flex><span>    <span style=font-weight:700>done</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    printf <span style=font-style:italic>&#39;%s\n&#39;</span> <span style=font-style:italic>&#34;</span><span style=font-weight:700;font-style:italic>${</span>!tmp_array[@]<span style=font-weight:700;font-style:italic>}</span><span style=font-style:italic>&#34;</span>
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>$ remove_array_dups 1 1 2 2 3 3 3 3 3 4 4 4 4 4 5 5 5 5 5 5
</span></span><span style=display:flex><span>1
</span></span><span style=display:flex><span>2
</span></span><span style=display:flex><span>3
</span></span><span style=display:flex><span>4
</span></span><span style=display:flex><span>5
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>$ arr=(red red green blue blue)
</span></span><span style=display:flex><span>$ remove_array_dups <span style=font-style:italic>&#34;</span><span style=font-weight:700;font-style:italic>${</span>arr[@]<span style=font-weight:700;font-style:italic>}</span><span style=font-style:italic>&#34;</span>
</span></span><span style=display:flex><span>red
</span></span><span style=display:flex><span>green
</span></span><span style=display:flex><span>blue
</span></span></code></pre></div><h3 id=随机选择>随机选择
<a class=heading-link href=#%e9%9a%8f%e6%9c%ba%e9%80%89%e6%8b%a9><i class="fa fa-link" aria-hidden=true title=链接到标题></i>
<span class=sr-only>链接到标题</span></a></h3><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-Bash data-lang=Bash><span style=display:flex><span>random_array_element() {
</span></span><span style=display:flex><span>    <span style=font-style:italic># Usage: random_array_element &#34;array&#34;</span>
</span></span><span style=display:flex><span>    local arr=(<span style=font-style:italic>&#34;</span>$@<span style=font-style:italic>&#34;</span>)
</span></span><span style=display:flex><span>    printf <span style=font-style:italic>&#39;%s\n&#39;</span> <span style=font-style:italic>&#34;</span><span style=font-weight:700;font-style:italic>${</span>arr[RANDOM % $#]<span style=font-weight:700;font-style:italic>}</span><span style=font-style:italic>&#34;</span>
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>$ array=(red green blue yellow brown)
</span></span><span style=display:flex><span>$ random_array_element <span style=font-style:italic>&#34;</span><span style=font-weight:700;font-style:italic>${</span>array[@]<span style=font-weight:700;font-style:italic>}</span><span style=font-style:italic>&#34;</span>
</span></span><span style=display:flex><span>yellow
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=font-style:italic># Multiple arguments can also be passed.</span>
</span></span><span style=display:flex><span>$ random_array_element 1 2 3 4 5 6 7
</span></span><span style=display:flex><span>3
</span></span></code></pre></div><h2 id=文件>文件
<a class=heading-link href=#%e6%96%87%e4%bb%b6><i class="fa fa-link" aria-hidden=true title=链接到标题></i>
<span class=sr-only>链接到标题</span></a></h2><h3 id=获取文件绝对路径>获取文件绝对路径
<a class=heading-link href=#%e8%8e%b7%e5%8f%96%e6%96%87%e4%bb%b6%e7%bb%9d%e5%af%b9%e8%b7%af%e5%be%84><i class="fa fa-link" aria-hidden=true title=链接到标题></i>
<span class=sr-only>链接到标题</span></a></h3><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-Bash data-lang=Bash><span style=display:flex><span>dirname() {
</span></span><span style=display:flex><span>    <span style=font-style:italic># Usage: dirname &#34;path&#34;</span>
</span></span><span style=display:flex><span>    printf <span style=font-style:italic>&#39;%s\n&#39;</span> <span style=font-style:italic>&#34;</span><span style=font-weight:700;font-style:italic>${</span>1%/*<span style=font-weight:700;font-style:italic>}</span><span style=font-style:italic>/&#34;</span>
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>$ dirname ~/Pictures/Wallpapers/1.jpg
</span></span><span style=display:flex><span>/home/black/Pictures/Wallpapers/
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>$ dirname ~/Pictures/Downloads/
</span></span><span style=display:flex><span>/home/black/Pictures/
</span></span></code></pre></div><h3 id=获取文件相对路径>获取文件相对路径
<a class=heading-link href=#%e8%8e%b7%e5%8f%96%e6%96%87%e4%bb%b6%e7%9b%b8%e5%af%b9%e8%b7%af%e5%be%84><i class="fa fa-link" aria-hidden=true title=链接到标题></i>
<span class=sr-only>链接到标题</span></a></h3><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-Bash data-lang=Bash><span style=display:flex><span>basename() {
</span></span><span style=display:flex><span>    <span style=font-style:italic># Usage: basename &#34;path&#34;</span>
</span></span><span style=display:flex><span>    : <span style=font-style:italic>&#34;</span><span style=font-weight:700;font-style:italic>${</span>1%/<span style=font-weight:700;font-style:italic>}</span><span style=font-style:italic>&#34;</span>
</span></span><span style=display:flex><span>    printf <span style=font-style:italic>&#39;%s\n&#39;</span> <span style=font-style:italic>&#34;</span><span style=font-weight:700;font-style:italic>${</span>_##*/<span style=font-weight:700;font-style:italic>}</span><span style=font-style:italic>&#34;</span>
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>$ basename ~/Pictures/Wallpapers/1.jpg
</span></span><span style=display:flex><span>1.jpg
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>$ basename ~/Pictures/Downloads/
</span></span><span style=display:flex><span>Downloads
</span></span></code></pre></div><h2 id=进度条>进度条
<a class=heading-link href=#%e8%bf%9b%e5%ba%a6%e6%9d%a1><i class="fa fa-link" aria-hidden=true title=链接到标题></i>
<span class=sr-only>链接到标题</span></a></h2><h3 id=打印进度条>打印进度条
<a class=heading-link href=#%e6%89%93%e5%8d%b0%e8%bf%9b%e5%ba%a6%e6%9d%a1><i class="fa fa-link" aria-hidden=true title=链接到标题></i>
<span class=sr-only>链接到标题</span></a></h3><div class=highlight><pre tabindex=0 style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-Bash data-lang=Bash><span style=display:flex><span>bar() {
</span></span><span style=display:flex><span>    <span style=font-style:italic># Usage: bar 1 10</span>
</span></span><span style=display:flex><span>    <span style=font-style:italic>#            ^----- Elapsed Percentage (0-100).</span>
</span></span><span style=display:flex><span>    <span style=font-style:italic>#               ^-- Total length in chars.</span>
</span></span><span style=display:flex><span>    ((elapsed=$1*$2/100))
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=font-style:italic># Create the bar with spaces.</span>
</span></span><span style=display:flex><span>    printf -v prog  <span style=font-style:italic>&#34;%</span><span style=font-weight:700;font-style:italic>${</span>elapsed<span style=font-weight:700;font-style:italic>}</span><span style=font-style:italic>s&#34;</span>
</span></span><span style=display:flex><span>    printf -v total <span style=font-style:italic>&#34;%</span><span style=font-weight:700>$((</span>$2-elapsed<span style=font-weight:700>))</span><span style=font-style:italic>s&#34;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    printf <span style=font-style:italic>&#39;%s\r&#39;</span> <span style=font-style:italic>&#34;[</span><span style=font-weight:700;font-style:italic>${</span>prog// /-<span style=font-weight:700;font-style:italic>}${</span>total<span style=font-weight:700;font-style:italic>}</span><span style=font-style:italic>]&#34;</span>
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=font-weight:700>for</span> ((i=0;i&lt;=100;i++)); <span style=font-weight:700>do</span>
</span></span><span style=display:flex><span>    <span style=font-style:italic># Pure bash micro sleeps (for the example).</span>
</span></span><span style=display:flex><span>    (:;:) &amp;&amp; (:;:) &amp;&amp; (:;:) &amp;&amp; (:;:) &amp;&amp; (:;:)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=font-style:italic># Print the bar.</span>
</span></span><span style=display:flex><span>    bar <span style=font-style:italic>&#34;</span>$i<span style=font-style:italic>&#34;</span> <span style=font-style:italic>&#34;10&#34;</span>
</span></span><span style=display:flex><span><span style=font-weight:700>done</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>printf <span style=font-style:italic>&#39;\n&#39;</span>
</span></span></code></pre></div><h2 id=总结>总结
<a class=heading-link href=#%e6%80%bb%e7%bb%93><i class="fa fa-link" aria-hidden=true title=链接到标题></i>
<span class=sr-only>链接到标题</span></a></h2><p>感觉平时很难用到这么诡异的 Bash 语法的。。。。</p></div><footer><div id=disqus_thread></div><script>window.disqus_config=function(){},function(){if(["localhost","127.0.0.1"].indexOf(window.location.hostname)!=-1){document.getElementById("disqus_thread").innerHTML="Disqus comments not available by default when the website is previewed locally.";return}var t=document,e=t.createElement("script");e.async=!0,e.src="//zdyxry.disqus.com/embed.js",e.setAttribute("data-timestamp",+new Date),(t.head||t.body).appendChild(e)}(),document.addEventListener("themeChanged",function(){document.readyState=="complete"&&DISQUS.reset({reload:!0,config:disqus_config})})</script></footer></article></section></div><footer class=footer><section class=container>©
2016 -
2024
Yiran Zhou
·
技术支持 <a href=https://gohugo.io/>Hugo</a> & <a href=https://github.com/luizdepra/hugo-coder/>Coder</a>.</section></footer></main><script src=/js/coder.min.6ae284be93d2d19dad1f02b0039508d9aab3180a12a06dcc71b0b0ef7825a317.js integrity="sha256-auKEvpPS0Z2tHwKwA5UI2aqzGAoSoG3McbCw73gloxc="></script>
<script async src="https://www.googletagmanager.com/gtag/js?id=G-G0433XDZ3V"></script>
<script>var doNotTrack=!1;if(!doNotTrack){window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-G0433XDZ3V",{anonymize_ip:!1})}</script></body></html>